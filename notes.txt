run doxy action on PRs, but not on drafts

*specify*
	C11 POSIX.1-2008
	mailing list

email: guide fix
	changelog

Fedora build NDEBUG

top tips ONLY if header-cache is set?
	then we've got a mechanism to save stats
	or if user *asks* for them :tip ?

quietly ignore non-existant config options beginning devel_*
	how?  where in code?

iwyu rules aren't correct w.r.t. regex.h
	we use a rule to include "mutt/lib.h" -> "mutt/regex3.h" -> <regex.h>
	but some callers dereference regmatch_t (possibly other stuff too)
	kill REG_COMP() or wrap it
	which regex functions do we use direction, outside of mutt/regex.c?
need <regex.h>
	alias/commands.c alternates.c attach/attachments.c
	browser/dlg_browser.c browser/functions.c color/regex.c commands.c
	config/regex.c conn/accountcmd.c conn/gnutls.c email/envelope.c
	email/from.c email/parse.c email/rfc2047.c email/url.c hook.c
	index/dlg_index.c menu/functions.c menu/menu.c mutt/charset.c
	mutt/prex.h muttlib.c pager/display.h pager/dlg_pager.c
	pager/functions.c pager/private_data.h pattern/compile.c pattern/exec.c
	pattern/message.c question/question.c

document repro builds in dev/
	add to rpm.spec

look for potential char[] buffer uses
	buf + pos, buflen - pos
	ag " \+ (.+)\b.* - \1\b"

wkd - https://wiki.gnupg.org/WKD
	Web Key Directory
	only lists *one* account

rename *_buffer_*() functions to buf, or strip buffer entirely
	mutt_b64_buffer_decode (3)
		mutt_b64_decode (5)
	mutt_b64_buffer_encode (4)
		mutt_b64_encode (8)
	test_mutt_b64_buffer_decode
	test_mutt_b64_buffer_encode
	mutt_socket_buffer_readln (2)
		mutt_socket_readln (19)
	mutt_socket_buffer_readln_d (1)
		mutt_socket_readln_d (12)
find all functions with a Buffer parameter

fix hcache vs bcache dir discrepancy
check upstream's docs/behaviour for cache config with/without trailing '/'
do we consistently mkdir on both?

OP_ATTACHMENT_PIPE isn't referenced
	not in mutt
	pipe-entry works

Stats: 2024-03-28
	 Mutt	NeoMutt
	96576	 127864	lines of code
	 2415	   4097	functions
	  215	    748	files
	  449	    171	loc per file
	   39	     31	loc per function

publish code-scanning repo
	neomutt private repo

compare mutt/neomutt config
	synonyms and deprecated
	create new synonyms for unnec mutt config

bad C functions
	https://github.com/git/git/blob/master/banned.h

refactor "not reached"
	8	ag "not reached"

find potential places for struct Buffer
	691	ag "([a-z_]+(->[a-z_]+)*), sizeof\(\1\)"
	37	ag "([a-z_]+(->[a-z_]+)*)-\>data, \1-\>dsize"

msgwin doesn't observe colour changes
	color normal red blue
	needs ctrl-l

be explicit?
	win->wdata_free = NULL; // No need, we hold the data
or dynamically alloc them, and prevent lots of github security warnings
	win->wdata_free = NULL; // No need, we hold the data
	autocrypt/dlg_autocrypt.c:326:6: dlg->wdata = &ad;
	browser/dlg_browser.c:1368:6:    dlg->wdata = priv;
	enter/window.c:263:8:            win->wdata = &wdata;
	gui/simple.c:140:6:              dlg->wdata = win_menu->wdata;
	history/dlg_history.c:147:6:     dlg->wdata = &hd;
	ncrypt/dlg_gpgme.c:751:6:        dlg->wdata = &gd;
	ncrypt/dlg_pgp.c:669:6:          dlg->wdata = &pd;
	ncrypt/dlg_smime.c:224:6:        dlg->wdata = &sd;
	pager/pager.c:420:6:             win->wdata = priv;
	pattern/dlg_pattern.c:344:6:     dlg->wdata = &pd;
	postpone/dlg_postpone.c:215:6:   dlg->wdata = &pd;

move to email/body? (and rename)
	struct Body *mutt_make_multipart(struct Body *b)
	struct Body *mutt_remove_multipart(struct Body *b)
	create email/multipart.c ?

need to test message_bar() when msg contains 2-cell characters
	(progress bar)

message_bar() doesn't need mutt_simple_format()
	it already has the screen width
	it just needs to pad using spaces

replace
	get_sort_str() with cs_subset_str_string_get()

vim-tabitha
	skip windows if
		b:tabitha_skip = 1
		window is zero width
		quickfix window (option?)

test: create code to display every dialog
	how?  some require files!

progress bar
	if message is very long (wider than the screen) it wraps
	but... the progress bar itself is only one row high
	leaving junk above it

#mutt user asks:
	how do I know which key I'm encrypting to in compose
	if there are multiple?
	hmm... hasn't been decided yet
	(key selection dialog comes after <send>)
	move it before?
		might mess up people's workflow
	but we could display the key/fingerprint/name
	what about multiple keys?
		list them all? probably

`:echo $INTERNAL_VAR` doesn't expand
	if you `setenv INTERNAL_VAR value` in NeoMutt
	external vars work, config and my_var do too
	which version do we use?
	system getenv() or neomutt's EnvList
	what about magic vars COLUMNS, LINES?

tv
	EBNF for all 87 commands?
	*read* folder_format issue https://github.com/neomutt/neomutt/issues/4170

merge
	#3890 - add mutt_mem_realloc_zero()
		need at least one user, first
		has tests?
	#4023 - fix observer event types

main - non-gui
	investigate / kill the need for:
	/* Always create the mutt_windows because batch mode has some shared code paths that end up referencing them. */
	bool NeoMutt.gui = true (or .tty = true?)
	need tests around all shared gui code
	every window/dialog create could fail
		every caller should check
	every question to the user could return immediately
		mw_yesorno() could return default
		query_yesorno() could return default, or use a non-gui form
	check for any uses of RootWindow, e.g. for width formatting
		wrapper for this use, fallback to $COLUMNS
		hide RootWindow
	need list of all cli modes
		everything possible from the command line

coverage:
	increase email/tags
add hcache to tests
	and maildir
	which other libraries are _testable_?
	(i.e. don't require gui parts)
	already tested
		address color compress config core editor email imap mutt notmuch parse pattern store
	untested
		alias attach autocrypt bcache browser complete compmbox compose
		conn convert envelope gui hcache helpbar history index key
		maildir mbox menu mh ncrypt nntp pager pop postpone
		progress question send sidebar

create f39/rawhide docker for clang-format
create devel/* action to run it
	base for a general linter
	âˆ€ .github/linter/*.sh
	No 'for' loop, separate steps so CI is clearer

create clang-format action using fedora docker
	cron
	fail if any diffs
	diffs -> artifact
	diffs -> branch [clang-format] (force?)
		no, push to branch it's working on
		except [main] -> [clang-format] or [main-clang-format]?
		commit "clang-format [auto]"
	work out how to clang-format the "#include" *block* of header files

bug?: 'color body' overrides 'color quotedX`!
	rbmarliere | ha, weird. setting color body color232 default makes all quotedX colors to be ignored hehe
	   flatcap | same in mutt
	   flatcap | I suppose it makes sense...
	   flatcap | the 'body' colouring rules have a higher priority than the 'quotedX' colours
	   flatcap | though... the quotedX background colours should show through the body's default background

kill
	create ~/Mail on startup
	/var/spool/mail doesn't exist
		or message: "set spool_file" to pick initial mailbox

Fedora, ask for karma

https://best.openssf.org/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.html

actions:
	I haven't seen "working-directory" in the actions before.
	I should probably retro-fit that into some of the other actions

refactor progress_new()
	new takes type, size
	progress_set_message(format, ...)
	printf-style
	saves on having temporary buffer in many of the callers
	can be called to change the message
	new(type) only
	progress_set_size(1234)?

DT_NOT_EMPTY -- not implemented in all config types
	doesn't make sense for numeric types
	should be there for strings / object types

struct Path needs: bool is_local

w0lff:
	I don't know all configuration options for the sidebar but I think the sidebar could have a fresher-upper.
	Like support for the empty/NoSelect folders (with an own color-group for "this is a non-selectable/non-mbox folder", thunderbird displays these
	folders in a darker grey);
	custom hierarchical entries with configurable indent;
	colorization by character spans e.g. highlight the number of unread mails different from the name of the folder;
	or even more advanced multiple custom sidebars, useful for multiple account setups or to give a reduced select view of only a subset of mailboxes.

sidebar tree generator
mxapi.account.get_path_separators()
	mailbox level
	or account level
mxapi.account.get_all_mailboxes()
	get a list of all (subscribed or not)
sidebar_fill_in_the_blanks
	create fake entries to create a coherent tree
sidebar_generate_tree -fill-gaps ~/mail  or  imap://host.com/
	=> limited number of sorting methods
	what happens with hidden mailboxes?

sidebar - when did labels start getting indented?

discussion: mailmerge howto
	see irc haxtibal 2023-11-05

's' <save-message> option to strip out ANSI colours
	update :version to dump colours

progress different colours for read/write/network?
	merge with base "progress" colour

stackoverflow
	In mutt one copies an email to a mailbox with copy-message, bound to C by default.
	This will ask you for a mailbox to copy it to.
	Is there a way to copy it directly to the mailbox currently highlighted in the sidebar?
we could add mailbox shortcut '$', but how would the code work
index knows about emails, but doesn't know about the sidebar
sidebar knows about the highlight, but doesn't know about emails
perhaps the sidebar could register a shortcut symbol, with a callback function
	see irc discussion on 2023-11-03, 2023-11-04
where does folder expansion happen?
	where does '<' become $record?
	buf_expand_path_regex()
	https://neomutt.org/guide/advancedusage.html#shortcuts

option to save a <vfolder-from-query>
	see irc discussion on 2023-11-03

for each db type, create and populate a database
	then try to open each database with all the wrong backends
	check that they all fail
	_NEO_DATA hcache?

colour: fix escaping, fix "normal"
	should use 'single' quotes for simplicity of escaping
orig config
	color body      brightyellow default  '\<_\S+_\>'
	color body      brightyellow default  '\*\<\S+\>\*'
	color body      brightyellow default  '/\<\S+\>/'
representation in :color
	color body bold brightyellow default  "\\<_\\S+_\\>"
	color body bold brightyellow default  "\\*\\<\\S+\\>\\*"
	color body bold brightyellow default  "/\\<\\S+\\>/"

color link command to share colours
	Need `enum ColorId link;` in AttrColor
	if linked, then changing one colour could affect many others
	would need to change the notification to pass an array
	'theme' command would only send one notification: ALL

info pages (:set, etc) could do with colour
	but it shouldn't be saved to file
		flag to colour
		flag to save colour
	can't tell if we have a light/dark background
	set background = {light|dark} ?
	need colours like vim
		keyword, comment, string
	and colours for the log messages

$ gh pr list --search "merged:>2025-01-13"

after attaching a file, remember the directory in case of attaching another

info pager, <save-message>
	mutt_sig_allow_interrupt(true);add "overwrite?" check

coredumpctl debug neomutt

top-level (feature) docs for
	colours
	caching - recommend LMDB

check fedora install instructions

coverage fix stats
	use lcov --exclude
	to ignore all the files we never intended to include
	push to coveralls

doxy: next big area for coverage?
	members 76%
	defines 40%
	check stats
	100% structs.svg (247)
		247 struct
		40 ARRAY_HEAD SLIST_HEAD STAILQ_HEAD TAILQ_HEAD
	100% pages.svg
	100% globals.svg
	100% functions.svg
	100% enums.svg
	76%  members.svg
	40%  defines.svg

Post Release
	https://github.com/neomutt/neomutt/discussions/3322
	clang-format options
	cull old issues
	Increase the Build Minimum Versions

find longest messages, consider multilining
	plus change po/

all proto-discussions to ~/work/discussion/
	make into a git repo

test io_uring.c
	figure out path to integration

disable $check_new just in the pager?
	i.e. quiet "New Mail in X" messages

$status_format -- %b Number of mailboxes with new mail
	can cause mailbox check
	const int num = mutt_mailbox_check(m, MUTT_MAILBOX_CHECK_NO_FLAGS);
	https://github.com/neomutt/neomutt/blob/main/status.c#L118
	that's probably unnecessary

split up functions
the opcodes can't be split -- too much overlap
might need to wait for the key code to be reworked
	gcc -I. -E -C functions.c | sed -n '/map: /,/^$/p'
		test on bsd, macos

ren progress bar to mw_progress_bar?

rename mw_ source files like dlg_*.c?

doesn't seem to work
	shutdown-hook "date > jim"

do we want to / how do we remove the state info from libmutt
the `static const`s are probably fine
some of the plain `static` might be too
	mutt/charset.c:58:               wchar_t                ReplacementChar             = '?';
	mutt/charset.c:63:               bool                   CharsetIsUtf8               = false;
	mutt/charset.c:80:  static       struct LookupList      Lookups                     = TAILQ_HEAD_INITIALIZER(Lookups);
	mutt/charset.c:95:  static       struct IconvCacheEntry IconvCache[ICONV_CACHE_SIZE];
	mutt/charset.c:97:  static       int                    IconvCacheUsed              = 0;
	mutt/logging.c:52:               log_dispatcher_t       MuttLogger                  = log_disp_terminal;
	mutt/logging.c:54:  static       FILE *                 LogFileFP                   = NULL;
	mutt/logging.c:55:  static       char *                 LogFileName                 = NULL;
	mutt/logging.c:56:  static       int                    LogFileLevel                = 0;
	mutt/logging.c:57:  static       char *                 LogFileVersion              = NULL;
	mutt/logging.c:62:  static       struct LogLineList     LogQueue                    = STAILQ_HEAD_INITIALIZER(LogQueue);
	mutt/logging.c:64:  static       int                    LogQueueCount               = 0;
	mutt/logging.c:65:  static       int                    LogQueueMax                 = 0;
	mutt/mbyte.c:43:                 bool                   OptLocales;
	mutt/pool.c:37:     static       size_t                 BufferPoolCount             = 0;
	mutt/pool.c:39:     static       size_t                 BufferPoolLen               = 0;
	mutt/pool.c:45:     static       struct Buffer **       BufferPool                  = NULL;
	mutt/qsort_r.c:37:  static       sort_t                 GlobalCompar                = NULL;
	mutt/qsort_r.c:39:  static       void *                 GlobalData                  = NULL;
	mutt/random.c:44:   static       FILE *                 FpRandom                    = NULL;
	mutt/signal.c:39:   static       sigset_t               Sigset;
	mutt/signal.c:41:   static       sigset_t               SigsetSys;
	mutt/signal.c:44:   static       struct sigaction       SysOldInt;
	mutt/signal.c:46:   static       struct sigaction       SysOldQuit;
	mutt/signal.c:50:   static       bool                   SignalsBlocked;
	mutt/signal.c:54:   static       bool                   SysSignalsBlocked;
	mutt/signal.c:57:   static       sig_handler_t          SigHandler                  = mutt_sig_empty_handler;
	mutt/signal.c:59:   static       sig_handler_t          ExitHandler                 = mutt_sig_exit_handler;
	mutt/signal.c:61:   static       sig_handler_t          SegvHandler                 = mutt_sig_exit_handler;
.
	mutt/base64.c:62:          const int                    Index64[128]                = {
	mutt/file.c:61:            const char                   FilenameSafeChars[]         = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+@{}._-:%/";
.
	mutt/base64.c:45:   static const char                   B64Chars[64]                = {
	mutt/buffer.c:46:   static const int                    BufferStepSize              = 128;
	mutt/charset.c:118: static const struct MimeNames       PreferredMimeNames[]        = {
	mutt/date.c:50:     static const char *const            Weekdays[]                  = {
	mutt/date.c:57:     static const char *const            Months[]                    = {
	mutt/date.c:67:     static const struct Tz              TimeZones[]                 = {
	mutt/file.c:58:     static const char                   RxSpecialChars[]            = "^.[$()|*+?{\\";
	mutt/logging.c:45:  static const char *                 LevelAbbr                   = "PEWM12345N";
	mutt/md5.c:46:      static const unsigned char          fillbuf[64]                 = { 0x80, 0 };
	mutt/notify.c:41:   static const char *                 NotifyTypeNames[]           = {
	mutt/pool.c:41:     static const size_t                 BufferPoolIncrement         = 20;
	mutt/pool.c:43:     static const size_t                 BufferPoolInitialBufferSize = 1024;
	mutt/random.c:47:   static const unsigned char          Base32[]                    = "abcdefghijklmnopqrstuvwxyz234567";
	mutt/string.c:113:  static const struct SysExits        SysExits[]                  = {

update test-library

Find files missing trailing newlines in a git repo:
	git ls-files -z | grep -vz "png" | xargs -0 -L1 bash -c 'test "$(tail -c 1 "$0")" && echo "$0"'

check logging on hooks is consistent

find "release checks" branch
	check include guards
	check @page exists in lib.h
	etc

iwyu branch
	cron
	artifacts for results
	separate build section for displaying results
		one that fails
	need sed scripts to filter output
	or csplit to break it up

update all docs that reference time, timeouts, etc

$timeout, $mail_check, $mail_check_stats_interval
	DT_NOT_NEGATIVE already
	is 0 allowed?
		yes by config
		is it meaningful by use?
			is disabling this timer meaningful?
		DT_NOT_ZERO?

wdata_free = wdata_free_generic()
	a function of the right prototype that just does free()
	âˆ€ *_free API fns?
	or if (wdata && !wdata_free) -> assume free() NO
	if wdata, wdata_free must exist, both or neither

what does iwyu.sh *need* from compile_commands.json?
	just "main.c"
	is the $PWD path needed?
	can I strip it down to 1 line?
	put it in .cache/mutt
	doc the contents of .cache/mutt
		source, how to build, etc

eliminate 59 static vars in functions?
	$ ag "^  static " | wc -l
	79
	$ ag "^  static const " | wc -l
	20
	postpone/postpone.c:74:1:        static time_t LastModify = 0;
	postpone/postpone.c:75:1:        static char *OldPostponed = NULL;

Is Menu.search necessary now that we have ordered function dispatchers?
	compare browser vs alias

status bar, new expandos? for
	search pattern
	number of matches (4/22)
		helps to notice wrap-around

overlay search matches in the index
	*if* the search field is even visible
	if I type `/john` in the index, that'll use $simple_search` -> `~f %s | ~s %s`
	search is telling the menu where to move the indicator, but not _why_
	the search is done lazily; it stops on the first match
	if it didn't, we could at least highlight the *lines* matched
	(and limit it to the visible window for efficiency)

don't seem to work .git/files/g3-overview1.gv
	unbind index *
	unmacro index *

Investigation: eliminate pseudo globals
	bool OptAutocryptGpgme;     ///< (pseudo) use Autocrypt context inside ncrypt/crypt_gpgme.c
	bool OptDontHandlePgpKeys;  ///< (pseudo) used to extract PGP keys
	bool OptForceRefresh;       ///< (pseudo) refresh even during macros
	bool OptKeepQuiet;          ///< (pseudo) shut up the message and refresh functions while we are executing an external program
	bool OptMsgErr;             ///< (pseudo) used by mutt_error/mutt_message
	bool OptNeedRescore;        ///< (pseudo) set when the 'score' command is used
	bool OptNeedResort;         ///< (pseudo) used to force a re-sort
	bool OptNews;               ///< (pseudo) used to change reader mode
	bool OptNewsSend;           ///< (pseudo) used to change behavior when posting
	bool OptNoCurses;           ///< (pseudo) when sending in batch mode
	bool OptPgpCheckTrust;      ///< (pseudo) used by dlg_pgp()
	bool OptResortInit;         ///< (pseudo) used to force the next resort to be from scratch
	bool OptSortSubthreads;     ///< (pseudo) used when $sort_aux changes

DT_ON_STARTUP
	can't be changed after startup completes
	i.e. must be in config file or cli: `-e set...`
make note in docs

rename `struct ConfigSubset *sub` -> `*cfg`?
	there are zero variables call cfg!
	but it *is* a *sub*set

folder_make_entry() does config lookups every time
	can this be factored out?
	check other format strings

discussion
	medium diff - anti-phishing
	check for non-ascii domains and show punycode
	work/phishing.mbox
where?
	index
		add to existing field?
		separate field / expando?
		warning expando / flag
	pager
	compose
	address book?

discussion - message strings
	define meaning of 'error' and 'warning'
	demote error -> warning where possible
	demote error/warning to message where possible
counts: (868)
	601 mutt_error()   395 uniq
	 27 mutt_warning()  25 uniq
	240 mutt_message() 154 uniq
possible easy task
	31 * "warning:"
	98 * "error:"
make sure they
	mutt_warning()
	mutt_error()
drop prefix from message and translations
create standard, translated, prefix for all warnings/errors
	prefix isn't displayed if `color error` / `color warning` is set
reword where necessary
	"Error opening 'memory stream'"
	"Error: " + "Can't open 'memory stream'"

like `color options`, have a colour for default/alternate answers? [yes]/no
	make default brighter
	make alternate dimmer
	or use existing 'options' colour
		replacing [xxx]
apart from mw_yesorno() which other questions are there?

index/functions.c is the (!shared->mailbox_view) check redundant?
	check if neomutt crashes without it
	run it through coverity
	if (!shared->mailbox_view || ((check = mx_mbox_close(shared->mailbox)) == MX_STATUS_OK))

log this?
	void mutt_beep(bool force)

check sort options are separated by ',' (comma) to allow splitting
	msgid "Sort (d)ate,(f)rm,(r)ecv,(s)ubj,t(o),(t)hread,(u)nsort,si(z)e,s(c)ore,s(p)am,(l)abel?"
	msgstr "Tri (d)ate/(a)uteur/(r)eÃ§u/(o)bjet/de(s)t/d(i)scus/aucu(n)/(t)aille/s(c)ore/s(p)am/(l)abel?"
after msgwin improvements, change to ', ' (comma space)
or allow splitting on comma-alnum or comma-bracket
check for other compact strings
long strings (81+)
	msgid "Reverse sort by (d)ate, (a)lpha, si(z)e, d(e)scription, (c)ount, ne(w) count, or do(n)'t sort?"
	msgid "Sort by (d)ate, (a)lpha, si(z)e, d(e)scription, (c)ount, ne(w) count, or do(n)'t sort?"
	msgid "Rev-Sort (d)ate,(f)rm,(r)ecv,(s)ubj,t(o),(t)hread,(u)nsort,si(z)e,s(c)ore,s(p)am,(l)abel?"
	msgid "Sort (d)ate,(f)rm,(r)ecv,(s)ubj,t(o),(t)hread,(u)nsort,si(z)e,s(c)ore,s(p)am,(l)abel?"
	msgid "WARNING: We have NO indication whether the key belongs to the person named as shown above\n"
	msgid "WARNING: It is NOT certain that the key belongs to the person named as shown above\n"
	msgid "S/MIME (e)ncrypt, (s)ign, encrypt (w)ith, sign (a)s, (b)oth, (c)lear, or (o)ppenc mode?"
	msgid "Invalid nm_query_window_timebase value (valid values are: hour, day, week, month, year)"
	msgid "messages whose Message-ID is included in the results returned from an external search program"

log_disp_debug -- dump everything?
	MuttLogger = log_disp_terminal;

pin a "help wanted" issue linking to discussions
	clear out, or transfer, all issues wanting help

discussions
	(re-)label *all* of them
	group into help-wanted, in-progress, crazy-ideas?
		or sub-categories/sections
	move all ideas in issues into discussions

tutorial
	mbiscuit | what you need is some young person with nimble fingers and all the keyboard shortcuts in their head doing a 'this is how fast mailing can be' tutorial
probably need two runs, one at speed, then one slow with explanations and a list of shortcuts/macros used

guug_ | flatcap: Another tagline (a bit hippy)-- neomutt: 60 to 0 in 2.3 seconds.

guug: neomutt, a TUI email client that lets you zip through emails
mbiscuit: I like the emphasis on speed.

messages that might benefit from \n
plus the keymap.c http:// error
	%d message has been lost. Try reopening the mailbox.
	%d messages have been lost. Try reopening the mailbox.
	%s does not exist. Create it?
	Attachment #%d modified. Update encoding for %s?
	Can't decode all tagged attachments.  MIME-encapsulate the others?
	Can't decode all tagged attachments.  MIME-forward the others?
	Can't postpone.  $postponed is unset
	Can't sign: No key specified. Use Sign As.
	Connected to %s. %s
	Connection lost. Reconnect to POP server?
	Connection to %s lost. Reconnect?
	Error encrypting message. Check your crypt settings.
	Error saving flags. Close anyway?
	Error. Preserving temporary file: %s
	failed to find message in notmuch database. try running 'notmuch new'.
	Fcc failed. (r)etry, alternate (m)ailbox, or (s)kip?
	ID has undefined validity. Do you really want to use the key?
	ID is expired/disabled/revoked. Do you really want to use the key?
	ID is not trusted. Do you really want to use the key?
	ID is not valid. Do you really want to use the key?
	ID is only marginally valid. Do you really want to use the key?
	Inline PGP can't be used with attachments.  Revert to PGP/MIME?
	Inline PGP can't be used with format=flowed.  Revert to PGP/MIME?
	Internal error.  Please submit a bug report.
	Key is not bound.  Press '%s' for help.
	Mailbox is marked unwritable. %s
	Mailbox was externally modified.  Flags may be wrong.
	Message can't be sent inline.  Revert to using PGP/MIME?
	Message contains text matching \$abort_noattach_regex\. Not sending.
	Message of read-only mailbox modified! Ignoring changes.
	MIME type not defined.  Can't view attachment.
	nm_default_url must be: notmuch://<absolute path> . Current: %s
	No crypto backend configured.  Disabling message security setting.
	No matching mailcap entry found.  Viewing as text.
	No Message-Id. Unable to perform operation.
	PGP already selected. Clear and continue?
	Posting to this group not allowed, may be moderated. Continue?
	QRESYNC failed.  Reopening mailbox.
	S/MIME already selected. Clear and continue?
	The message index is incorrect. Try reopening the mailbox.
	This IMAP server is ancient. NeoMutt does not work with it.
	Warning: This alias name may not work.  Fix it?

these need to be paired exactly, making them error prone
	notify_observer_add()
	notify_observer_remove()

window_redraw()
	after window_repaint(win)
	call window_repaint(focus)
	allowing window to position the cursor and make it visible
	windows that allow focus need to check for (win->actions & WA_REPAINT)
	to prevent duplicate repainting

BUG: doesn't cause a repaint of the index
	set narrow_tree = no

nf - no fail versions of functions
	c/o @ossilator Oswald Buddenhagen
	https://sourceforge.net/p/isync/isync/ci/master/tree/src/util.c#l609

no space before \$
	ag -u '[^ \t]\\$'

help
	use expandos to generate the help page
		ideally needs dynamic widths to use space as needed
	but dump the output to a file, then pager as normal

https://github.com/MaJerle/c-code-style
https://github.com/mcinglis/c-style

colour schemes
	need background = light|dark
	theme-name-light.rc
	theme-name-dark.rc
	could link objects together, like vim
		color sidebar_indicator link indicator

MARKER Buffer.data
	count dereferences outside of mutt/buffer.[ch]
		main test
		449   30 Buffer.data
		158    0 Buffer.dptr
		 75    5 Buffer.dsize
		 62    0 Buffer.data, Buffer.dsize
	aim to replace with buf_at()
	need to inline buf_at() first
	ASSERT() range checks?
	make the Buffer opaque?
	distinguish between buf_len() and buf_strlen()

asan instructions -- add EXTRA_CFLAGS='-ggdb3 -O0' to ensure debugging info
	seems not to matter, only stripping the binary affects the output

triv: dump keymaps #ifdef? --debug-keymaps

menu globals, not freed on exit?
        can't find where it's freed
        char *SearchBuffers[MENU_MAX];

not closed on exit
        static FILE *fp_random;

kill the num_accounts and return the value
int mutt_autocrypt_db_account_get_all(struct AutocryptAccount ***accounts, int *num_accounts)

add logging info to ubsan page
	https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html#logging

doc egypt workflow
	CFLAGS -> svg
	make flatcap branch the main?  or merge?

link observer function docs to Event/EventStruct they receive

update web dev translate deployment
	add coverity

add links in web/dev to gfx repo for arch diagrams etc
	and/or dev list

add with/without build tests for autocrypt
	needs vm without libraries installed

make sure all notifys doxy their data
struct Notify *notify;    ///< Notifications: #NotifyIndex, #IndexSharedData

some actions missing from https://neomutt.org/dev/actions
	~/work/site-actions/
	macOS

copy asan configure/bash scripts to dev page

graphviz doc to dev/analysis
What about?
	--fuzzing           Enable Fuzz Testing
add _dev analysis fuzzing page

:help [TOPIC]
	e.g. to_chars
	auto-complete on TOPICs
	what would be the source?
	would it be translated?

analyse all /*.h used in */*.[ch]
	e.g. format_t to core/ ?
		(used by many libraries)

try to find homes for the contents of protos.h
	or merge it with something else

eliminate some CodeQL warnings/errors
	https://github.com/neomutt/neomutt/security/code-scanning
	dev analysis page with download instructions

discussions
	realloc_zero() - ARRAY upgrades
	address book upgrades (tags, limit, sidebar, colour)
	background edit - steps, arch how?
	buffer.buf_at() inline
	buffer opaque?
	buf_len() vs buf_strlen()?
	offer up some code-scanning issues for fixing

strip down /home/github
	create backup script to ignore 3rd-party/
	dated, vivo-github.tar

config that isn't relative to parent config file
	$certificate_file
	$autocrypt_dir
	check all files/dirs?
	are *any* expanded when set?

filter inbox into folders
	sieve future mail

neomuttrc.vim
	neomuttlog.vim offer to vim ml

	update neomuttrc.vim
		colors with attributes

	vim neomutt, -noregex not recognised

	get vim css color working with neomutt config #rgb colour syntax

hcache: lazy_realloc() is only lazy to 4KiB
	then it reallocs for every tiny addition
	change increase to 4KiB blocks
	all 54000 test emails lead to hcache sizes < 4KiB

convert hcache to use Buffer as the store
	eliminate lazy_realloc

tidy live neomutt config
	dupe to ~mutt
create parallel mutt config
	dupe to ~mutt
start by flattening it into one file
then reorganise and resplit
move into .config/neomutt
fix git upstream for main repo

try https://github.com/grobian/html2text

op_exit() doesn't
	mutt_startup_shutdown_hook(MUTT_SHUTDOWN_HOOK);
	mutt_debug(LL_NOTIFY, "NT_GLOBAL_SHUTDOWN\n");
like op_quit() does

review all reallocs => memset to clear new memory
	email/attach.c has lots!
	mutt_realloc_zero(ptr, size, old_size)
	couple of places using bare realloc
	lazy_realloc() in hcache
		library-ify for Buffer too?

commands.c
	lots of buf->data -> buf_string(buf)
	buf->data[0] -> buf_at(buf, 0)
	look for others
	make buf_at() inline?

refactor actions to use actions/checkout to *push*
	https://github.com/actions/checkout/#Push-a-commit-using-the-built-in-token
	.github/workflows/doxygen.yml
	.github/workflows/translate.yml

triv: break up huge case: clauses
	measure all of them

external pager - hitting 'j' doesn't advance to next email

ARRAY_FREE -> _CLEAR
	free(**ptr) free, null pointer
	clear(*ptr) empty
	cleanup()   tidy global resources
add to code docs
void buf_dealloc(struct Buffer *buf); -> _clear()

refactor: ?
	only used in two tests
	can it be used for anything else?
	#define SET_UP() (file_set_up(__func__))
	#define TEAR_DOWN(fp) (file_tear_down((fp), __func__))

replace urlview (unmaintained) with urlscan (maintainer, more features)
	need to change /etc/neomuttrc
	need to update rpm .spec file

restore progress bar to imap
	caused repaint race condition
	removed in e3773a736

coverage
	get 100% function coverage first?
	notmuch - reachable?
	enter/functions
	mutt/memory
	store/*

:setenv
	don't leave neomutt to setenv query?
	translate tabs and escapes
		flags for the pager?
	any key to leave the pager (flag?)

move mview.* into index/
	or libmview? encapsulate it?
		if so what's in index? what's in mview?

subjectrx results should be stored in EmailView not Envelope
	char *subject;   ///< Email's subject
	char *real_subj; ///< Offset of the real subject
	char *disp_subj; ///< Display subject (modified copy of subject)

BUILD
	PR template
	- All builds and tests are passing
	update to mention test files
	https://github.com/neomutt/neomutt-test-files

	update all templates

	test make install / uninstall?
		test for zero files afterwards

	add to build-and-test action
		if po/*.po have changed
		msgfmt --statistics -c -o /dev/null po/pl.po

	move mutt_X.[ch] into libX
		deps don't matter, it's a separate src file
		just mutt_history.*

	move hdrline to libindex?
		rename to 'index'?
		struct HdrFormatInfo

CLI
	neomutt -v output:
		add $LANG?
		multi-column output to reduce lines?

DOCS
	docs: "delimited" lists -> "separated"

FUNCTIONS
	split browser cases by function
		and other dialogs
		so all <functions> are independent functions()
		check against OpPager lists, etc
		dlg_select_attachment / mutt_attach_display_loop
			attach/recvattach.c:946:       9  mutt_attach_display_loop

	browser seems ok

	are ANY <functions> handled in the switch/case?

	rename OPs to match functions
		e.g. drop MAIN_
		{ "set-flag", OP_MAIN_SET_FLAG },

	dedupe function names: (check again for new dupes)
		add_cert
		add_folder
		append_message
		attach_config_observer
		attach_window_observer
		cmp_version_strings
		create_gpgme_context
		dump_menu
		format_line
		init_mailbox
		mutt_exit
		mutt_file_lock
		mutt_file_unlock
		mutt_resize_screen
		mutt_ssl_socket_setup
		mutt_ssl_starttls
		mutt_str_asprintf
		pgp_check_traditional_one_body
		tls_set_priority

	rename: buf, buflen
		look for others, how?
		* km_expand_key - Get the key string bound to a Keymap
		* @param s   Buffer for the key string
		* @param len Length of buffer

RENAME
	rename params
		size_t mutt_mb_mbstowcs(wchar_t **pwbuf, size_t *pwbuflen, size_t i, char *buf);

	'l' bad choice of param name
		First l chars of both strings are equal

	rename s/mutt_buffer_select_file/dlg_browser/
		factor out the 'dialog' part first

	change to **ptr, look for others
	free functions to take (**ptr)
	then deref to Type *t = *ptr;
	check ALL free pointers are safe on NULL -- document param as such

	SEND_NO_FREE_HEADER refers to an Email, SEND_NO_FREE_EMAIL?

	should be _free() -> need _new() too
		void mutt_bcache_close(struct BodyCache **bcache)

	variables, urgh! sendlib.c
		mutt_lookup_mime_type() int szf, sze, cur_sze;

TEST-TIDY
	test cases, delete contents of /tmp afterwards

	list all the test cases

mention corpus and dictionaries

how to extract libmenu, so that it can be independently tested
        3 $configs:
                menu_context, menu_move_off, menu_scroll
        20 <functions>
                OP_BOTTOM_PAGE, OP_CURRENT_BOTTOM, OP_CURRENT_MIDDLE,
                OP_CURRENT_TOP, OP_FIRST_ENTRY, OP_HALF_DOWN, OP_HALF_UP,
                OP_LAST_ENTRY, OP_MIDDLE_PAGE, OP_NEXT_ENTRY, OP_NEXT_LINE,
                OP_NEXT_PAGE, OP_PREV_ENTRY, OP_PREV_LINE, OP_PREV_PAGE,
                OP_SEARCH, OP_SEARCH_NEXT, OP_SEARCH_OPPOSITE,
                OP_SEARCH_REVERSE, OP_TOP_PAGE
        lists: empty, 1, 2, <page, =page, >page, big, really big

split up multiple assignments
        grep " = [^,;]* = "
        grep " = [^,;]* [!=]= "

test our more toolbox distros
	https://github.com/toolbx-images/images

add `test/neomutt-test -E` as a separate test
	fix two failing cases, if possible

sieve for github maintainers
	more sieves

change function typedefs?
	function-pointer.org
	anyways, just don't do the pointer as part of the typedef, and it's much easier
	typedef void func_t(int, int);
	func_t *ptr = NULL;
	this reads _exactly_ like a function declaration, much easier to remember

understand its use and rename it to match
	@note The top-well-named MUTT_ICONV_HOOK_FROM acts on charset-hooks, not at all on iconv-hooks.

How many globals are doxygen doc'd?
	ffch ctags -x --c-kinds=v

is all the code need to parse an email independent?
can it be:
	library-ised
	stressed tested?
	speed tested?
	fuzzed?

neo-bot: version command (only directly to bot)
	version number (need one)
	repo location

web/dev document oss-fuzz steps for a local build/test

speed test a huge mbox mailbox vs 2022-04-29
	compare against mutt

:source supports relative paths, but :lua-source doesn't!
	when called from hooks

for --devel-feature, add a section in the ./configure summary
that explains: this feature may change or be removed without warning
please give feedback
create discussion for each --devel option and link to it

config register
	ignore dupes?
	pop/imap share MessageCacheClean

tests combine
	NeoMutt = test_neomutt_create();
	TEST_CHECK(NeoMutt != NULL);
	TEST_CHECK(cs_register_variables(NeoMutt->sub->cs, Vars, DT_NO_FLAGS));

once we can test mutt_parse_rc_buffer()
	wrap a fuzzer around it!
	seeded with hundreds of valid set/unset lines

list macros
	count their use
	eliminate any?
	or static inline functions
		82 MoreArgs
		52 SKIPWS
		48 mutt_socket_send
		29 state_putc

convert all questions(issues) -> discussions
	1) find all question issues
	gh issue list --label type:question --state closed

all style guide ideas -> discussion

docs: add "recently changed" section to front of guide!
	plus link to github releases page / changelog
	:changelog
changelog
	markdown files
	<details>
	<summary><h2>2024-02-01</h2></summary>

	* Features
	- #4134 Command-line Crypto (neomutt -C)
	* Bug Fixes
	- #4065 track new-mail check time per mailbox
	- #4141 fix(change-folder): don't exclude notmuch
	</details>

make lmdb, rocksdb, tdb default stores (modern)
	lmdb, rocksdb, tdb, tokyocabinet, kyotocabinet, bdb, gdbm, qdbm
	encourage packagers to choose at least one of the first three

check doxygen version in ubuntu-latest
	1.9.1
check if the debian-sid container is still needed

acutest implement ASSERT_EQ(left,right), ASSERT_NEQ(left,right)
	this would allow acutest to print both values when they differ
	(saving the user from doing so)
	update LOTS of our tests

italics
	https://apple.stackexchange.com/a/267261
	mac:
		Terminal.app good
		iTerm.app needs https://apple.stackexchange.com/a/267261

find all functions returning 0=success,-1=failure
	check they are tested with `if (x() == 0)` not `if (!x())`

anything in wiki worth saving?

from python/black:
	Authors
	The author list is quite long nowadays, so it lives in its own file.
	See AUTHORS.md

functionise `git d1`

contrib:
	update rpm spec & bugzilla
	notify packagers
		ask them NOT to compress everything!

root
	weekly ctags
	/usr/include
	/usr/lib/gcc/x86_64-redhat-linux/13/include/
OR
	run ctags OF those dirs, elsewhere
	keep in ~/.cache

find/kill
	if (x) return (or continue or break)
	else if...
	if (.*\n\s\+{\n\s\+return\>.*\n\s\+}\n\s\+else

alternative to ASAN?
	clang -ftrivial-auto-var-init=pattern -o jim jim.c

:color OBJ
	display one-line summary of colour in msgwin
	how? need special handler to display the colours
	temporarily take ownership?
	what about colours that take multiple regexes?
		resize msgwin?  how much?

generate list of dialogs (all combinations)
	macros/config to navigate to each
	<write-screen>X<enter>
	sample emails / config
	draw graph
	pager: plain, email, attachment mode
		with / without index
		with / without sidebar
		with / without help
	index: normal, postpone, attach-email
		with / without sidebar
		with / without help

config docs: unify (imap only)-style sections
	dedupe any deprecated/synonym refs

man pages (inc synonyms, deprecated)

post release:
	c99 -> c11? (threading)
	POSIX:2008
	cull issues
	author repo / git mailmap

post freeze:
	colour changes - explanation
	doc reorg
	website update
		intro
		screenshots
	unit test coverage
	remaining big
		colour
		get_field
		browser
		small dispatchers
	update copyright date
	update {windows,data,overview}.txt
		dev web section
	compose multipart video

improve score
	https://www.mail-tester.com/

add sample patterns to test/leak.c
	enable pattern coverage
	need mailbox/emails, menu data

update {windows,data,overview}.txt

translate: "tag-" ?

action for IRC notifier
	https://github.com/rectalogic/notify-irc
	https://github.com/Gottox/irc-message-action
	on:
		discussion:
			types: [created, edited, answered]

how much work to fix the new_mail command?
	notifications from backends

find/read the `git log MUTT_MAILBOX_CHECK_POSTPONED--date=human` code
	or better still --date=relative

typo?  autocrypt?!
	de.po:msgid "no"
	de.po-msgstr "nein"
vs
	de.po:msgid "No"
	de.po:msgstr "No"

useful?
	#if defined(__COVERITY__)

reuse yml actions
	uses: google/oss-fuzz/infra/cifuzz/actions/build_fuzzers@master
	# org/repo/dir/dir2/dir3
	# in dir3/actions.yml is run
	set oss-fuzz repo, file
		infra/cifuzz/actions/build_fuzzers/action.yml

kill #define EXTRA_SPACE (15 + 7 + 2)
	recvcmd.c
	commands.c
heuristic dating back to 2000

these aren't *comp* flags, separate flags?
	MUTT_COMP_CLEAR
	MUTT_COMP_PASS
add unbuffered flag?

change browser_sort() to not take *entire* state,
	just the array that needs sorting
	convert all comparision functions to the qsort_r() compatible
	factor out config use to top-level parameter

logging error fd == -1 ?
	mutt_socket_write_d() -1> a0000 SELECT "INBOX"

actions: check that matrix builds continue on error

create distro-specific dockerfiles, build weekly
bases
	https://hub.docker.com/_/debian
	https://hub.docker.com/_/ubuntu
	https://hub.docker.com/_/archlinux
	which others?
macos?

vim plugin
	setlocal keywordprg=echo;echo;neomutt\ -n\ -F\ /dev/null\ -OQ
	extend to ALL neomutt symbols: commands, functions, colors, etc

sync github to all my private gitlab repos (or delete them)

update test library

NDEBUG warnings around asserts

add X_new()/X_free() wrappers for non-trivial objects
	AttachPtr, QClass, Regex, ListNode
	SmimeKey, PgpUid, MuttThread, Message, Hook

rename index vars to idx to avoid index(3)

add dialog helper functions to get:
	shared data
	priv data
	menu
	etc

git lt [NUM]

look for static functions called mutt_*
	ignore callback functions?
	mutt_bcache_move               mutt_poll_fd_add
	mutt_date_parse_rfc5322_strict mutt_poll_fd_remove
	mutt_getaddrinfo               mutt_randbuf
	mutt_getaddrinfo_a             mutt_regmatch_end
	mutt_get_hook_type             mutt_regmatch_len
	mutt_get_winsize               mutt_regmatch_start
	mutt_gsasl_callback            mutt_sasl_cb_authname
	mutt_gsasl_init                mutt_sasl_cb_log
	mutt_is_predicate_recipient    mutt_sasl_cb_pass
	mutt_is_spool                  mutt_sasl_conn_close
	mutt_keymaplist_free           mutt_sasl_conn_open
	mutt_keymap_free               mutt_sasl_conn_poll
	mutt_make_greeting             mutt_sasl_conn_read
	mutt_md5_process_block         mutt_sasl_conn_write
	mutt_md5_read_ctx              mutt_sasl_get_callbacks
	mutt_monitor_getch             mutt_sasl_start
	mutt_parse_idxfmt_hook         mutt_sort_subthreads
	mutt_parse_unhook              mutt_ssl_socket_setup
	mutt_pattern_list_new          mutt_str_is_email_wsp
	mutt_pattern_new               mutt_update_v2r
	mutt_pgp_command

use `gh gist` to update local mirrors
	python scripts need to turn "private" repos into git@ urls

use ctags to look for reserved keywords, e.g. variables called private
	then put in github action

test all graphviz (and other debug) functions compile and run

reorg 'build' to add options conditionally on compiler

scan-build

pop/auth.c eliminate #ifdef DEBUG
	(nearly) only use in entire code base

index:
	OP_MAIN_CHANGE_FOLDER vs OP_MAIN_CHANGE_FOLDER_READONLY:
	OP_MAIN_VFOLDER_FROM_QUERY vs OP_MAIN_VFOLDER_FROM_QUERY_READONLY
	vfolder READONLY isn't handled correctly, doesn't follow READONLY path

check all string-list config items note the separator character
	alter makedoc to use the slist flags to say:
		string list (comma-separated)
	means adding SLIST_SEP_* flags to docs/config.c

maildir_parse_flags
        case 'T': /* trashed */
          if (e->flagged && C_FlagSafe)
should set flags, then update in frontend if C_FlagSafe condition is met

log_disp_terminal doesn't honour log_file_set_level(LL_DEBUG1, false);

#define UNUSED(x) UNUSED_ ## x __attribute__((__unused__))

build script
	if clang else gcc
	optional compiler flags

neolog vimrc, 'set wrap linebreak showbreak=\ \ \ '

add brief README.md to each library dir
	quick description
	links to [devel] arch pages
	links to [user] dialog pages
	note
		which configure options enable the code
		build dependencies
		or push these to the code docs?

isn't used!
	MT_COLOR_MESSAGE_LOG

flip to match M.verbose
	#define MUTT_QUIET         (1 << 3) ///< Do not print any messages

config
	have macro -- VALID_PTR() for native retvals?

base32 doesn't belong in mutt/random.c
	maybe in mutt/string.c

main.c
	text outside of else, search for others (over 60 comments before else)
	/* If editing the infile, keep it around afterwards so
	 * it doesn't get unlinked, and we can rebuild the draft_file */
	else

eliminate complicated macros (multiline, conditionals, many callers)
refactor complicated or oft-used macros
	email/mime.h:85:1:   ENCODING         7
	email/mime.h:77:1:   is_multipart     8
	mutt/buffer.h:43:1:  MoreArgs         78
	mutt/regex3.h:52:1:  REG_COMP         18
	mutt/string2.h:47:1: SKIPWS           51
	state.h:56:1:        state_putc       30
	state.h:55:1:        state_puts       98
	mutt/string2.h:60:1: terminate_buffer 9
	mutt/string2.h:51:1: terminate_string 5
	email/mime.h:83:1:   TYPE             35

flagify
	#define MUTT_UNBIND  1<<0
	#define MUTT_UNMACRO 1<<1

This doesn't seem to be documented in neomutt's manual either
I wonder if we could kill this unexpected behaviour
	/* This is an undocumented feature of ELM pointed out to me by Felix von
	 * Leitner <leitner@prz.fu-berlin.de> */
	if (mutt_str_strcmp(mutt_b2s(buf), ".") == 0)
	  mutt_buffer_strcpy(buf, LastSaveFolder);
	else
	  mutt_str_strfcpy(LastSaveFolder, mutt_b2s(buf), sizeof(LastSaveFolder));

wrong name, should be _free()
	void mutt_addrlist_clear(struct AddressList *al)
	...
	mutt_addr_free(&a);
	hmm... but it doesn't free the actual AddressList

string fn to pretty print \t, \r, \n for tests
	handle NULL, quote string

init.c
	getsid() is POSIX2001
	no need for #ifdef?
	exists in cygwin

config system
	can it return warnings?
	yes, but it doesn't

Convert to enum?
	struct ConnAccount.type
		unsigned char type;     ///< Connection type, e.g. #MUTT_ACCT_TYPE_IMAP

are these identical? YES
	static char crypt_flags(KeyFlags flags)
	static char pgp_flags(KeyFlags flags)

decrypt_part - Explain r_is_signed better
	returns -1, 0, 1, 2

move all
	if (!param)
	to start of function
	return early
	ag "^ +if \(.*\n +return"
	2540 functions
	start with libmutt?

browser.c has a lot of
	struct Email *tmp;
	tmp's a bad name for a variable
	scratch is too

replace "for (int" -> size_t in libmutt
	177 occurrences

pager
	replace CHECK_* macros with function
	bool pre_requisite(flag|flag, quiet);
	if (!pre_requisite())
		break
	need interface for index/pager operations?
	what are possible outcomes?
	break (continue loop)
	exit (function)
	fallthrough? NO refactor to avoid

check all src against vim folding

body_copy() : move foreach param -> param_dup()

conditional constants - reduce to a comment
	Hmm... non-functional enum entries might cause problems
	MENU_KEY_SELECT_PGP
	MENU_MIX
	MT_COLOR_DIVIDER
	MUTT_PAT_NEWSGROUPS
	MUTT_OPEN_HOOK
	REDRAW_SIDEBAR

eliminate enum AccountType?
use enum MailboxType
	what about smtp?
	add entry?

ag '\(!\((.*) && (.*)\)\)'
ag '\(!\((.*) \|\| (.*)\)\)'

if (!(a && b))
if (!(a || b))
ag 'if \(!\(.*(&&|\|\|).*\)\)'

demote to warnings
mutt_error(_("Warning: XXX"));

test int against 0
	what about ALL int members?

simplify cppcheck example
	cppcheck --enable=all --language=c --std=c99 -i autosetup --platform=unspecified -D_POSIX_PATH_MAX=4096 -DPATH_MAX=2048 -I/usr/include -I/usr/include/mit-krb5 -I. --output-file=cppcheck.xml --xml --xml-version=2 <path to neomutt source code directory>
	cppcheck --enable=all --language=c --std=c99 -i autosetup -D_POSIX_PATH_MAX=4096 -DPATH_MAX=2048  -I. --output-file=c1  .
use --check-config to list missing header files
working example 2023-05-03
	cppcheck --verbose --enable=all --language=c --std=c99 -i docs -i autosetup -i test -DPATH_MAX=2048 -D__x86_64__ -I. -I/usr/include -I/usr/lib/gcc/x86_64-redhat-linux/13/include -I/usr/include/qdbm --output-file=c1 .

search pattern for attachment *name*

[expando-arrow] neomutt-old
	expando %{name}

https://developers.google.com/gmail/imap/imap-extensions

perform sync-mailbox on SIGINT, SIGTERM, SIGSTOP?
	if computer is shutdown, work could be lost

support xterm bracketed paste
	https://en.wikipedia.org/wiki/Bracketed-paste
	allow pasted text to (optionally) ignored

logs rotated twice
	https://github.com/neomutt/neomutt/issues/1160

feature harvest addresses
	auto-harvest addresses from emails
	2 stages, 1) select pool, 2) verify list
	1) tag lots of emails in a mailbox
	   sort and uniq the list of addresses
	   filter out existing addresses and your alternates
	2) show list of addresses
	   tag ones to be kept (saved to address book)
	list includes number of references
	click on address opens first email with address
	or better folded address list contains indented list of emails
	post stage: go to address book with a "new" section to allow editing

source --if-exists FILE?
	or source! FILE

sidebar plugins!
	reserve an area for a calendar, clock, or text from a file
	https://gist.github.com/flatcap/e3da53679afd9a9a65418c228a8c3040
	sidebar_top file1
	sidebar_top file2
	sidebar_bottom '`cal`'
	interpret ansi colours
	integrate to calcurse

#define UNUSED(x) UNUSED_ ## x __attribute__((__unused__))

User wanted to set a bunch of config based on a language setting
	Is there some kind of syntax like in `.desktop` files to achieve this?
	set greeting[en] = "Hello"
	set greeting[es] = "Â¡Hola!"

editor: add flag to function for specific callers that will accept <mailbox-cycle>
	i.e. it will default to <space> on attach-file

optionally replace the Menu tree chars
	$tree_chars

:theme X
	load a colour scheme from /usr/share/doc/neomutt/themes/X
	`set my_theme = X` (auto, or in file)
	or :theme path/to/file
	$theme_path (colon separated)
:theme [list]
	show a list of themes from dir in a menu
	two panel window? like index/pager
	top (index) shows list of themes
	bottom (pager) shows contents of file?  highlighted to match
	bottom (pager) shows list of effects?
		how to do this without actually applying it?
	'q' quits, <enter> selects theme
	:theme [autocomplete]

create a unique handler-function for each neomutt function/command
	if many neomutt functions/commands share code, factor it into another c function

query: limit: de-colon translation strings

query-append
	doesn't dedupe new entries

upgrade MbTable to understand unicode character modifiers
	e.g. 0xfe0f (emoji), gender, fitzpatrick (skin tones)
	https://www.unicode.org/L2/L2016/16181-gender-zwj-sequences.pdf
	without this fix, $from_chars, etc get their calculations wrong

<tag-prefix> vs $auto_tag
	try to make all the behaviour consistent
	*except* where the function only allows tagged usage,
	e.g. <group-alternatives>

gahr
	would you change alias_to_addrlist to append to the addrlist param ?
	So you could avoid the temporaries + mutt_addrlist_copy
it's not quite trivial due to `first->personal` and call to mutt_addrlist_to_intl()
that'd get repeated for the entire list

add ASAN notes to github canned responses

check sample/contrib themes work

aliases:
	after a query, cache the results
	if the user doesn't already have any aliases
	using <complete-query> will add/overwrite cached results
	<complete> will use cached addresses

try to replace the %<strtime> expando,
	so the current time/date can be used in macros, etc
	ideally need a pair of matching symbols
	{} [] <> in use

auto release build tests
	*.h: first two "^#" should be #include guards, and last line

<force> function that turns off confirmation for the next function
	or to end of macro
	<unforce> to re-enable?

change help during questions
	yes/no show all possible responses
	including $abort_key (Ctrl-G)
	is abort always available?

Is there any way to capture and refer back to the address captured by 'send2-hook ~t %s' in a backtick command on the right-hand side?
	e.g. ~t "jim@host.com"  ->  set varible = "\1"  (meaning jim@host.com)
	hmm... not easily, because we'd have to de-construct the pattern
	"~t jim@example.com" is easy enough, but what about "~t jim | ~t bob"
	hmm... if the pattern-matching code were able to tell the caller _which_ part of the pattern matched
	patterns are only ever matched against one type of object, but we wouldn't be able to tell which field
	mutt_pattern_exec() would return: MUTT_PAT_TO, "jim@example.com"

$smart_wrap doesn't apply to email headers
	should it?

add expandos for mailbox/email to pipe/filter commands
	e.g. my_command --title "%s"
	for the email subject

bug
	three accounts wth imap_check_subscribed fail
		apple@host.com
		banana@host.com
		cherry@host.com
	tries to lsub cherry's mailboxes to plain "host.com"
	need upstreams fix b48f8e1e

visual glitch at time of sending mail?
	sidebar always gets updated and refreshed ahead of other windows!
	
make mail_check_stats default to YES?
	most people will want it

ideas for REALLY deeply nested emails:
	The number of replies is much more than 100
	1) In index view center subject if message is under cursor.
	2) Limit the maximal offset of discussions in index view.

make all notification objects const?
	possible?

rename op_XYZ() functions to fn_&?
	probably no, but need to de-dupe them

file browser, add (toggle-able) live preview window
	mailcap the current selection into the window
	need focus control or duplicate set of motion functions

guideline for mutt_{message,warning,error}
	would you want the message to interrupt a macro running?
	mutt_error() => stop macro?
	mutt_warning() => print/queue during macro?
	mutt_message() => ignore during macro?
	option to ignore erros duing macro run?

is there a security? reason that we don't log all gpg commands?
	all the gpg commands go through: ncrypt/pgpinvoke.c:226

mutt_query_exit()
	on Ctrl-C, Y, don't exit(1)
	set a global that causes the dialog stack to collapse?
	potentially allow the backends to close down gracefully

color command doesn't update pager!
	`color header fg bg .`
	it would mean re-rendering the email to re-embed the colour codes
	setting SigWinch=1 forces the issue

reduce CI cost:
	only run most test for test/NAME branches

colours:
	add flags to definitions?  TAKES_REGEX?
	add callback parse function?

struct Email: adding notify changed the struct
	check hcache version is diff for release

docs: add page describing all config types
	including all flags (subtypes)
	
nntp: allow sub/unsub in index/pager

coverage: check dev analysis docs for new 'coverage' dir

<thread><function>, <subthread> to act without tagging
	like <tag-prefix>, add "-prefix" to above?

nntp docs:
	document '?' on screen to browse after 'i'

config parsing revamp
	track stack of files 'source'd
	track line numbers
	batch mode flag -> do nothing for gui config like 'color'
	cache locations of config
		like vim's `:verbose set x`
	need framework to delegate parsing

add stats page:
	email stats about one email?
		size, headers, etc?
	mailbox stats
		num emails, num uniq addr/recipients, size
	click on num addrs for *list* of addrs
		user can act on list: email, alias, etc
	stats on all mailboxes, number, size
	email stats across all mailboxes?
	try to limit info to that in header cache for speed

github action
	check for @file header, etc
	*.c need config.h
	*.h need include guard
	check for empty line at eof
	*.c @page
	"calc" undoc'd functions
	shellcheck

Live log message window (for devs?)
	magic height
	shown when several messages arrive in 1s => show all
	Ctrl-L clear
	list for logging (needs notify)
	follow log, always at end (no user interaction?)
	top-level window.  where?
		side -> narrow
		bottom -> short
	page up/down could cause more logging!
	simple interactions would have to be log free

add dev docs for all --debug/--devel configure options
	link to docs from ./configure --help

in future with external event loop,
	macros can be executed in one go, without refreshes
	currently the keys get put into the buffer
	then the index/pager/etc executes them individually
	perhaps the user *wants* to see feedback for the macro?
	-> <silent> (<verbose>) surrounds
	end of macro -> !<silent>
	nested macros will depend on if <verbose> were used in any
	(cf vim lazyredraw, :silent)

behaviour on multiple error messages?
	stop action on first?
	tell use to read <show-log-messages>
	or a counter "error... (+2)"
	or 1 sec timeout & queue

why no <tag-pattern> in alias dlg?

widescreen
	demo vimeo
	winch hooks
	start with ordinary screen
	sidebar, index lines, pager
	demo making window narrower/wider, taller/shorter
	narrower -> sidebar hidden, wider -> sidebar restored
	taller: index lines increase, short index lines hidden

config errors
	file:linenum: error
	print offending line
	(+E1234?)
	tidy filenames with '~' for errors
	or relative to '.'

merge gfx repo into website /gfx ?

eliminate fallthroughs - use functions

banned.h
	sprintf -> snprintf
	etc

config: allow dupe registrations
	iff they are identical:flags, type, default

socket: add timeout code

safari77 : mutt_sidebar repo

RFC6154 - set imap trash sent/record automatically?

rtlexpand
	add build option?
	add to make (dist)clean?
	DISTCLEAN_TARGETS

build
	add --undefined for ubsan
	add debug prefix for asan option

rename (synonym) <save-message> to <move-message>

CHECK: neomuttrc.5 is correctly built (not missing */config.c)

bug: pager: $wrap=0 doesn't clear '+'s at beginning of line

add $imap_context like nntp to limit to recent emails

add <function> for graphviz dump?

too many <delete-*> functions -- need one which can be configured

refactor all notify_observer_remove to use the supplied notify object

change one-liner help to be useful as an error message when setting config?
	see translate.txt

add graphviz to analysis web page
	and coveralls

replace greeting, attribution, signature, etc
	%{greeting} ... %{attribution} ... %{signature}
	mail-merge for one-off emails

pattern for matching mime/types?

./configure /tmp
	notify packagers

reference CONTRIBUTING.md in newbie-tutorial

(un)focus-hook
	change check_stats timings!

hcache metadata - be specific about Mailbox maildir:/path

Email.path -> edata (mbox, maildir only? compressed?) notmuch?

Email.*gui* -> Email.view {} move to end of struct

testing maildir
	need functions to (create/move/delete) (mailboxes/emails)

add visual feedback for SIGINT-interruptability?
	is this just synonymous with progress bar?
	probably

event scripting
	<gahr> I want an integration with a scripting language
	<jindraj> lua?
	<gahr> and the integration is event driven
	<gahr> jindraj: I don't care too much
	<flatcap> who are you?  and what have you done with gahr?
	<gahr> so neomutt issues events like key_pressed, or message_opened
	<gahr> and those functions are implemented in a script and can call to neomutt commands
	<flatcap> that would be very nice...
	<gahr> key_pressed(key) { if (key == 'a') { neomutt::open_folder('imaps://....') }
	<flatcap> but I'm damned if I know how you'll do it!
	<gahr> you'd get rid of macros, folder-hooks, everything
	<gahr> just events
	<flatcap> one of my reasons for refactoring the dialogs is as preparation for moving the main event loop...
	<flatcap> i'd like one getch() in main() that distributes events to the "focussed window" (or wherever)
	<flatcap> it would also include timers (so we can get rid of the imap code in the getch())
	<flatcap> delegating events to a script would be simple

focus in/out. useful?
	https://unix.stackexchange.com/a/480138/417458
	http://invisible-island.net/xterm/ctlseqs/ctlseqs.html
	There's a FocusIn/FocusOut mode. To enable:
		echo -ne '\e[?1004h'
	To disable:
		echo -ne '\e[?1004l'
	On each focus event, you receive either \e[I (in) or \e[O (out) from the input stream.

allow <limit> in the pager, so the user can
	<limit><enter> to refresh the index

*live* limit (config option?)
	limit is reapplied after any action
	`~N` limit: emails disappear after reading (e.g. in Pager)

<jindraj>
	I know about one case when tag prefix doesn't work.
	When you use internal pager and have pager_index_lines set to some positive number.
	Tag multiple messages, open any message, then tag prefix doesn't work, all actions are applied only to a opened message.
	It may be misleading because you can see the messages tagged.
<tag-prefix> isn't implemented for the pager
	should it be?

on mailbox_sync()
	does the frontend *know* what's changed?
	should sync() be given a subset of E?
	what benefit?  rest might change anyway (externally)

sort_alias default to "unsorted"?
	since it affects the query menu

pinned issues
	I need help - how to ask for help, how to write a good issue
	I want to help - how to join us
	I want to thank you - star, donate, help, "thanks" -> irc
	link to Discussions

notmuch address search, adjusted to neomutt query format
	notmuch address --output=sender %s | sed 's/\(.*\) <\(.*\)>$/\2\t\1/'
	notmuch address --output=count --output=sender %s | sed 's/\([0-9]\+\)\t\(.*\) <\(.*\)>$/\3\t\2\t# \1/'

pager:
	option to turn off wrapping
	then have functions to scroll left/right?

expandos
	option / mechanism to show which fields have been truncated `â€¦` 
	HOW?
	alter formatting syntax %-min.maxS ?
	or add extra expandos for selected big fields
	%s (subject), %st (subject truncation-marked)

webpage: how to debug neomutt problems
	bisect config
	null config
	etc

Alias colours for deleted, tagged, search
	(or defined some standard names/colours for these states)
	add vim's hls option
	use notmuch-style colours, abbrs for labels (icons)
	combine colours
	vim's hls only highlight matched part
		colour line, highlight match!

add build and analysis pages to welcome email
	revamp newbie page

dlg_verify_certificate() only user of Menu.dialog
	like pager with (m)enu selection
	separate windows!
	pager (handling paging keys)
	message window (handling menu keys)
	message window has focus, delegates to pager

[] move the view 1/2 page (viewport)
	add keys to move +/- 1 line (^E, ^Y)
	hook up to the mouse?

Add more warnings to default build?

pop
	auth change while -> for * 2
	PopAuth.method -> name?

when deprecating config, etc
	display links to website giving details

giving the Mailboxes a monotonic sequence number
	(as their unsorted order)
	means dividers wouldn't need to be the same type
	as their siblings (wouldn't be grouped by Account)
	when sidebar_sort_method=unsorted

mailcap doesn't accept */*
	(as a fallback)

tidy, doc, publish all build/parallel scripts
	build-scripts repo

option to reverse the direction of $resolve
	for users that `set sort=reverse-date`

pattern help
	complete on % too
	list %patterns in help

limit neomutt support to versions less than
	n years / m months old

change config errors to file:line for easier vim
	where else are file / line nums used?
	mutt_debug(LL_DEBUG1, "%s:%d: ERROR: unlink(\"%s\"): %s (errno %d)\n", src, line, buf, strerror(errno), errno);
	mutt_debug(LL_DEBUG1, "%s:%d: ERROR: unlink(\"%s\"): %s (errno %d)\n", src, line, mutt_b2s(buf), strerror(errno), errno);
	mutt_debug(LL_DEBUG3, "%s:%d: mutt_mktemp returns \"%s\"\n", src, line, buf);
	mutt_debug(LL_DEBUG3, "%s:%d: mutt_mktemp returns \"%s\"\n", src, line, mutt_b2s(buf));
	mutt_error(_("Bad history file format (line %d)"), line);
	mutt_error(_("Error in %s, line %d: %s"), rcfile, lineno, err->data);
	mutt_error(_("Improperly formatted entry for type %s in \"%s\" line %d"), type, filename, line);
	mutt_warning(_("Warning in %s, line %d: %s"), rcfile, lineno, err->data);

searching: pattern expansion using simple_search
	`apple` will be expanded using $simple_search
	`apple | ~f foo` won't
		it will fail because `apple` isn't valid
	can we apply the checks and expansion to each part?
	would the result still be predictable?

function/setting to turn off confirmations whilst in a macro
	might make functions unpredictable
	unless there's some visual feedback

SIGWINCH - only root window should be listening
	sends out Window Events on change
	need ALL dialogs to be listening, first

encrypt to self: alternative to neomutt config
	add to gnupg.conf
	encrypt-to <your keyid>

user headers "..." to "(+n more)"?
	after 5th header?
	in left column?

imap (un)subscribe to bypass mutt_parse_rc_line()
	see upstream
	easy?

to devel-ml (and/or user-ml)
	after sidebar fixes
	announce new features [FEAT], enhancements [ENH]
	+= / -= for number, slist
	setenv
	addrbook
	compose

mx.h dependencies - ensure API defn headers are dependency free
	move to libmutt? / libcore? (because of Mailbox)

nntp_auth() split up into separate functions, like other backends?

open address book with <open-address-book>
	tag some addresses
	then <mail> -> compose
	do we need to involve the index?
		prob not
		share compose startup code
	<quit> goes back to wherever you were before

fake mailboxes (dividers) get sorted by Accounts
	how do we insert "mailboxes -label" into the right place?
	what about sorting?

non-easy task "mailboxes -label"?

review SORT_*
	UNSORTED = 0
	deprecate "order" naming

travis shellcheck scripts
	[release]?

devel feature - docs/web link to "may change" page

docs config: list flags?
	(not empty)
	(not negative)

diagrams and descriptions of EVERY combination of
	index/pager/sidebar status_on_top, sidebar_on_right
	too many?

update & publish docs/config/design*.md
	web/dev
	link to The Diagram!

--------------------------------------------------------------------------------

delegate Config object to NeoMutt (don't free it separately)
NV NeomuttView => ndata & free_ndata - wrap gui globals

âˆ€ types
âˆ€ levels N|A|M
âˆ€ (name|HE)
âˆ€ (get|set)
âˆ€ (native|string)

level	HE
N	* --> Global
	^
	|
A	* (value)
	^
	|
M	* (value)

lookups with missing HE -> string
manipulations to generate scope, etc
lookup on unchanged M mean 2 redirects
if M-value is looked at *once*, it's likely to be again
	so always generate

N-sub or Globals âˆ€ code?
	N-sub where possible
	then convert to (scope-)-sub later

create_inheritance needs to honour INH_ACC|INH_MBOX
if config *can't* be inherited, will all lookups be inefficient?  probably
or drop flags - inherit anything, code will decide N|A|M
NO. need flags to warn user (flags to match code)
inherit where A-sub or M-sub are used
need flags for config dump (add to :set output)
does INH_MBOX imply INH_ACC?  probably
	specify both for clarity?  YES
need to categorise all Config
	NONE (global)
	Account-specific
	Mailbox-specific
	447 config variables
:set -h (help) other options for dump flags, including inheritance

my copyright
	sort/wrap Makefiles/auto.def

after dlg-local data, move src into dlg dirs
	(index, pager, sidebar)
	browser
	addrbook
	history
	compose
	remailer
	query
	recvattach
	+ncrypt * 3
	+conn * 2
	+autocrypt

mutt_config.c, config def
	convert comment to markdown *string*
	support: bold, italic, paragraphs, lists, tables
config dump option to display in various formats
	markdown (unprocessed)
	text
	highlighted-text
	nroff
	docbook
fix doc build

create_inheritance
	N-, A, M-sub missing name
degenerate !sub, or !name -- fail
simple name exists return HE
A-sub, parent -->  N-sub exists, create A:name
M-sub, parent --> A-sub, parent --> N-sub exists, create A:name, create M:name

Pass sub to dialogs -- their config scope
What if dlg needs some A- and some M-specific config?
Dlg given M-sub, searching for A-limited config will cause M-inherit!
All gui-config is global -- initially
All index/page config is M-specific, compose too
Alias/query is global
Who checks config setting?  parse_set?  validator?
	magic validator âˆ€ config to check inheritance?
Add *sub* to dlg, get_config_scope(dlg)?
	change varname from sub to "cfg"
After docs split, break up / comment config lists by N|A|M scope?

{imap,pop,smtp,nntp}_port config?  only settable by URL!
timeouts on variables (for passwords)?
	require all accesses to be through cs/sub
libsend around smtp.c send.c sendlib.c
sort_re docs wrong
why are the 6 charset config not using DT_SLIST?

help backend
	if neomutt started with zero mailboxes, load help
	first email says "Welcome to NeoMutt, press <enter> to continue"
	use localised version of email where available
	then vim-tutor like

Account observes config
{user,pass,login} -> set_X
url change -> wipe settings, set all

need service name "imap", etc
globals - need to parameterise:
	$tunnel
	$preconnect
	$use_ipv6
	$connect_timeout

ConfigAccount - cached credentials (rename?)
if (!has_X) get(X)
	function callback to Account

mx_open -> imap_open -> socket -> sasl (missing creds) -> connect
	sasl needs to ask user for info
	ssl/tls need to validate certificates

missing credentials (before connect) - has to happen here
	*sasl* might ask questions
	accept/reject cert (mid-connect)
		pass in response for testing purposes?
	NO have special version of libquestion

magic pager bar too
create index/pager macros that save/restore
	pager_index_lines
	sidebar_visible
	pager_format
	save to myvars
	if ifdef to only need one macro?

M.verbose for messages -> notification?
	let UI decide if quiet or not

main reuses Buffer *folder confusingly?

main - folder-hook is called before startup-hook
	should it?

pop_fetch_mail()
	move spoolfile, $folder out of pop/

ConnAccount needs method to *push* data
	e.g. ask for a password, then Account saves to config

lots of sidebar settings apply to the browser
	should be account display settings!

folder format needs 'subscribed' flag/field

format format use %l (hard links) to distinguish local/net browser formats (conditional)

:changelog ?
	read from /usr/share/doc/neomutt
	:news ?
	:credits
	:about

auto.def
	list devel features, e.g. magic bars
	add disclaimer

desktop stuff (mailto, icon)
	contrib
	web contrib
	mailing lists
	twitter

backends need splitting
	UI stuff vs pure code (only dep libmutt etc)
	good for asking questions too
	"pop/gui.c" all the wrappers

Add Imap seq letter/fd to all logs?
	need imap_debug() macro

Document Imap compression to user ml (etc)

change imap_error to use macro and MuttLogger correctly
	or eliminate it!  no gettext, uses function names!

backend/path.c âˆ€ type

loglevel for data (imap) showing '\n'?

mutt_inbox_cmp() called by
	browser, sidebar

use startup notification to imap_login()?
	parse config
	"mailboxes" -> A,M generation
what if INBOX isn't subscribed?
	what happens to empty '/' Mailbox?
	Kept -- it was "mailboxes" after all
After config, have A-M tree
	Imap listens for STARTUP
startup:
	startup-notification
	startup-hook
	folder-hook
	open folder
imap uses notify to login âˆ€ A
	login -> LSUB -> mailboxes
startup-hook
	allows user to make post-config changes / commands
folder-hook
	allows user to make folder-specific changes
open folder

$folder should be tidied on setting - strip trailing slash
probe
	if local dir, squash ../ etc
	imap, trailing / (need Account)
who does the tidying?  when?
	validator/fixer?
	or observer?  NO
		observer -> user set, notify, fixer set, notify!

change reset_tilde to just search all config
	to save keeping list up-to-date

split buffer_expand/resolve into PATH functions and MAILBOX functions!

config: change sort to work like enum -- use Data field
	except allow magic "reverse-", "last-" prefixes

create mailbox (browser)
	errors on empty -- kill error
	rename, delete too?

{backend}/hcache.c?
	no, hcache shouldn't be in backends

change OP_X to exactly match function name?

split up MxOps?
	have backends register their functions?

split mx.c mx_{ac,mbox,msg,path,tags}.c

{backend}/{ac,mbox,msg,path,tags}.c âˆ€

Distinguish all IMAP logging by its connection details
	create imap_debug() macro
	add prefix field to log_dispatcher_t
	all the functions using mutt_debug() need an adata param/local
	use prefix of [seqid/fd]

new sort option to sort flagged emails first
	include entire thread?

have HomeDir, create CurrentDir for cwd?
	it doesn't change

named mailboxes - check "name" is unique across *A*
compare local fs using dev id, inode id
test ("prefix/%s/suffix", path)
HomeDir, CurrentDir _const_ char *
fix test names: test_pop_path2 -> test_path2_pop
Have HomeDir, create CurrentDir for cwd?
	it doesn't change (yet)

A is global, outside of parse(M, a, etc) so
split parse? for imap to use?  where is A subst?
M-fn(M-str, A (optional)), parse uses stack. imap uses A-self
M-str is de-escaped, de-quoted
parse M is A-stack-aware, get str, get stack A
M-fn() if A A->sub else N->sub.  lookup $folder
	resolve (M-str) -> P; find (P) -> M or ac_add(M) on A
	or new A, ac_add(M), or fail

rename mbox - what happens to hcache?
	what happens currently with IMAP? - lost? unreachable
	NOTHING

issue template -> folding section + ``` ?
setenv doesn't accept "X?" to query only "?X"
mutt_date_localtime_l (with C locale?)
bug: HOME=/ neomutt -d6 crashes on startup - fopen failed
define LL_CONFIG even if it's only 5
config logging level, file,rc ':cmd', acc, mailboxes, stack?
test case for saving to a symlinks -> real mustn't overwrite symlink!
test realloc(0), rather than code exception!
cron: check all msg/error for gettext
change #ifdef else -> #ifdef/endif #ifdef/endif for testing both paths?

use mbox driver to open orphan maildir file R/O?  NO, maildir
release check everything with, without pgkconf
doc release-test.sh, shellcheck it
shellcheck hcachever.sh and test output for various releases
mailboxes -spacer "free form string" ?
change twitter to *my* email - access to others?  how?
change_folder_next broken?
https://github.com/neomutt/neomutt/contribute !!!

'force' flag for recalc(), repaint()?
	ctrl-l => reflow *all*, recalc *all*, repaint *all*

--------------------------------------------------------------------------------

Sidebar folding
fold_level
	fold at account only
	fold at any nested Mailbox
exceptions for New, Flagged emails, current Mailbox
Highlight on Account expands all M
	move down to A, highlight on 
	move up from next A, highlight on A's last M!

Sorting
	Mailboxes only by N or count, etc
	Inc A => sort *within* A by N or count, etc

Colour for A, e.g. red + underline
Expandos for
	A: type IMAP, host, user, port, desc
	folded mailboxes: num M, total N, total F, total E, total O, total R, etc
	subscribed expando "*" vs space
	<toggle-subscribed> to view all M
	$sb_show_all?
	<subscribe>/<unsubscribe> to mailboxes/unmailboxes
	<next-sibling>(prev) <parent-folder>
	expandos for *totals* or automagic?

--------------------------------------------------------------------------------

capitalise Autocrypt: code, docs, trans
alias - recent queries as sidebar entries
popup windows - dim(grey) all colours of other windows (how?)
alias tag == groups?
makefile autosetup folding

emails[] split - stepping stone
	backend keeps private array
	notifies to another part of self to update frontent array
	frontend behaves as normal during transition

memory usage
	where's it all going?
	need tree of objects
	visitor sizeof()!
	:memory command
	--debug-memory

create more easy tasks (investigate)
	pin issue

tabs for accounts - steal space from helpbar (if visible)
	on left?
	on right?
tab name needs format string for "*" notifications
preset, coloured blobs?

for popup windows, or non-focussed, *dim* other windows
	want to preserve indicator presence
	color dim_{text,indicator,bar}
	if unset, don't dim?
	or generate defaults?
	need 3 or 4 indicator colours {focus,dim}_{indicator,highlight}
	sidebar _does_ show dim_highlight

screenshots
	svg - fake sidebar divider line?
	termtosvg - hide cursor

:verbose set/color/etc
	like vim
	save location of last setting of var
	config, cli, etc
	show when/who last set that variable/color/etc
	debug/devel only?

"mailboxes -folded X"
"mailboxes -recurse X"
	how would the sidebar/maildir declare/process the option?

Window observer WIN_DELETE as d'tor!

cli text mode opti
on - sets $ascii_chars
	how can we do this automatically?

docs: two types of dialog: pager, index
	plus passive windows

use `ifdef` to test if file exists?
	syntax?
	new command instead?
	or <silent> option?

off-by-one pager_index_lines doesn't include ibar
sidebar will become the same when divider is in a separate window!
what about users that share config between old/new neomutt (or upstream mutt)?

merge gfx/arch diagrams into doxygen docs?
	where?  how?
	link from dev page

Config
	rather than C_X = val; fn(); C_X = oldval
	create tmp *subset* with that one value changed!
	isolates change from other code/readers/threads!
	will that work?
	if A:M:Cfg and set plain Cfg?
	if unnamed subset, will normal inheritance still work?

"builtin" lots of refs left in docs/code
	validator warning?

flatcap/flatcap/README.md!

man validate: mandoc -Tlint file.1

attach_abort, macos, use ENHANCED symbol?

<f1> help
<f2> web help, use mailcap!
ConfigDef
	help section=href
	varname = #offset!

mutt_assert()
	endwin, backtrace, assert
	or #ifndef DEBUG, just assert?

Kushal: ideas for motivating devel community?

have *Window* cache text/attrs?
	repaint itself?
	unless (calc?)
	might lead to multiple paintings

docs for log vim syntax, conceallevel=2

folded struct in C is private 'o' symbol
	comment for folded function

universal docs - all text and SVG

validator contract?
	what's expected for each config type?

validator need to pass *var* especially if inherited

bash completion for ./configure

attach list expando for boundary param, how?

audit imap untagged commands before authentication

test build all db store combinations + pkgconf!  ~512

make store TESTCASE (lmdb)

devel/noconfig (or globals)
	var = &cdef->var !
	+ flag, (assert NULL)

const âˆ€ graphviz functions

sb/preview insertion: observe AllDialogs
	rather than Neomutt, for reduced noise

progress bar to status bar expando?
	how to disable normal display?

index what do the functions apply to?
	sb, mbox, email, notmuch, index

test: check that test_X() provides 100% coverage of X()
	and other test functions aren't required, âˆ€X

index "preview" panel
	sort of "opposite" of index_pager_lines (focus on pager)
	option to *not* read email (or default)

add space into API headers, code style too - blank link

review upstream sed scripts

test files need to be non-symlinked dir. doc this

debug
	move win_name to common?

error message
	options %s may not...
	underline %s for emphasis.  how?
	printf("%s", decorate(param))
		not possible without static buffer

travis
	libpcre2-dev + pcre2 missng
	idn2 too?

array of components to X_init(), X_shutdown()

cumulative expandos for threads, etc
	%x, %Cx
	%b, %Cb

gnutls + ssl -- auto.def, no warning

config
	cdef: name, &var, initial
	type my_var delegates to String
		implements +=, -=
	subset name "", !parent
	scope MYVAR
	cs_inherit_variable(cs, NULL, "my_var")
	always store as string
	merge create_synonym and inherit variable?

enable -Wextra ?
	how much noise?  quite a bit
	183 signed-ness
	306 unused param
	  9 missing field (PrexStorage)
	 12 missing field ConnAccount

20:34 <Raid-1> Yes, adding "deb http://ftp.de.debian.org/debian testing main" to my sources.list worked like a charm.

iconv
	drop PreferredMimeNames
	check all charset names strictly using iconv
	have deprecation period where we tell the user what to use instead

command/function to display current ssl cert info
	for current account
	add to :show-account command
	account credentials (or ***)
	hostname
	certificate
	account-specific config

expose *read-only* config variables for
	cwd, current A/M/E . name/path/etc?

bash completion for neomutt, based on: /usr/share/bash-completion/completions/mutt
	âˆ€ cli options
	for aliases too?

imap mailbox comments/descriptions
	https://tools.ietf.org/html/rfc5464
	https://doc.dovecot.org/configuration_manual/imap_metadata/
	CAPA: METADATA

tweak maildir backend to allow opening a single file
	fake mailbox, 1 email, read-only

header and msgcache use different dirs!
	imaps:flatcap-mail@flatcap.org
	imaps_flatcap-mail_flatcap.org

bug: after being prompted for an smtp password, it's not cached in C_SmtpPass

change myvars to use NT_MYVAR in Config
	allow A-, M-scoping?

sidebar announce behavioural changes (user-ml, website news) link to twitter, irc

":seta" == ":account set" ?
":setm" == ":mailbox set" ?

add compress to 'P' build, travis, scripts
	check P settings
	fmemopen?
	inotify?

after release check acutest, autosetup for new releases

analysis-compiler - list all my gcc flags

more test builds with deployment
	scan-build
	cppcheck
	lcov - deploy to website repos
	link in from analysis pages
	repos have README.md - which has priority on main website?
	put content in analysis/ for scoping
	test dupes and scoping

web: add GH release notes emojis to web top-level menus?

put header cache structs in separate *minimal* header files

shellcheck on hcachever.sh

struct Pager -> PagerInfo?

move file deletion out of page
	which callers can be fixed?

help_line_format - put custom text at the top
	tie in with account-hooks, macros, etc
	for reminders, etc

mutt_sort_headers actually sorted Emails

status bar idea:
	empty status_format -> do not draw
	using conditional expandos that evaluate to an empty string -> do not draw

debug refresh idea: use greyscale background
	increment each repaint
	need to combine colours
	would need bitfield or flag (changed & visible) on Mailboxes
	or each window has a repaint count
		need way to reset occasionally
		Ctrl-L?

add 'sleep' command
	useful for macros
	allow fractional seconds
	can lua do this instead?

easy: mxapi: mbox_create/delete()
then add to browser, need exists fn too

mxapi open_append - move create? query to neo
backend->does_mailbox_exist()
	no, query user
	be->create_mailbox() OK
	be->open_mailbox()

Mailbox, Email - rearrange members: pure data first, connecting pointers,
	see #1870
	private data, last view data - move into inline View struct?
	move into external view struct?
	func data is from file/server - no config required, no globals
	use hcache as guide to purity of data
	Email shrinks from 192 bytes to 32
	Body shrinks from 176 bytes to 24
	Envelope is 344 bytes

no such mailbox -> link to docs
	fake mailboxes

project "next release"
	rename to "2019-MM-DD" after release
	notes, triage, todo, done

split up management repo?

new form for error messages?  two-lines
	first line has error message: "Can't open folder"
	second line has the place: folder, path, url, etc
	simplifies translation strings
	can highlight path
	path less likely to be truncated/wrapped

pager <change-folder>?<enter>q goes back to pager

log macro actions carefully

log all hooks

$folder = /dev/null
	leads to crash (not repeated)

config: can't un*set* enum!

postponed docs don't contain the work "draft"!

post-send hook for doing stuff

M must exist
	what about "sent" or "trash" folders?  which might not
	option to create (silently) missing Mailboxes?
	could be messy

help: macros with descriptions are truncated
	can't see full-text
	need wrapping

account-hook is #ifdef SOCKET!

cli(debug) mailbox dump, print index to screen width formatted
	coloured, batch mode, retval like -z, -Z
	or just dump *new* mail
	multiple mailboxes too, separated by M's path?
	json/xml output?
	eventually split into separate app using libmutt, etc
	use getopt_long -- all platforms >10y

Feature: when entering a field, print errors on the line above
	alternaively, *insert* entry field below message window
	it's empty and invsible unless used!
	could use for completion matches too

mutt_buffer_mktemp() ought to live in muttlib! because of config etc
	buffer.c should have no dependencies (except memory, string)

config validators - allow to change value, clamp, ignore "builtin"

eliminate config.h âˆ€ .h (29) start with libs

Narrow sidebar idea, when width = 1 (or 2)
	abbreviate to single letter
	use colour to show new (or icon)
	position gives you a clue where new mail is
	width=1 no divider, use bg colour to distinguish from index/pager

rename var tmpfile (it's a libc fn)

drop all email addrs from docs (except mine?)

which commands *might* have observers?
	sidebar fns don't know about/if there's a sidebar!

command events, pass Commands[] index, no other data needed

ACS_VLINE(sb) -> create primitives draw_line(), draw_box()!

eliminate all strtoX(), use mutt_str_strtoX()

Config (accept-disabled-config)
	enable by default
	allow distros to disable

--------------------------------------------------------------------------------

init base windows main()
(compartmentalised world)
index creates dialog - tree, diagram
dialog has data (state including current Mailbox)
sidebar init -> window
	sb_init(dlg) -> inserts itself
	show data tree to A->M

Index <sb-open> -> sb_fn(open) -> dlg.set_current(M) - index processes
	send notify M changed (sb listens -> need recalc)
Index calls reflow/repaint on dlg, sg reacts, repaints.  Done

On window drag resize, when are recalc/repaints done?
Drag (horizontal) -> SIGWINCH -> reflow root -> *some* windows notify size
(sb no action), (index need recalc), repaint root, skip sb, repaint index DONE
Drag (vertical) (helpbar no change), others repaint

separate re*calc* from re*paint* stages for cleaner refresh?
	functions in Window: recalc, repaint, handle function()
Index->find(ID_SIDEBAR) in dlg, call sb(win, x, y, z)
sb->find(ID_INDEX) in dlg

--------------------------------------------------------------------------------

idea: magic wrap - regex to ignore wrapping for URLs etc
	or $no_wrap_split

lower case attrset not wrapped!

docs: check paths are correct
	/usr/share/docs/sample

debug-only MARKER logging âˆ€ colour code paths
	all valid, all error, all dupes, all uncolor non-existent
	if not markers, comments âˆ€
	LL_MARKER (#ifdef DEBUG) level7 just for testing?

how many ways are there to reply?
	how many config vars/lots affect reply?
	alternates, aliases, bounce, reply-to:, etc
	flowchart?  too complicated?

allow "uncolor obj" for normal objects -> default default (no attrs)
	+ attach_headers, staus, uncolor needs retval

libgui - new logging level?

wrap ColorQuote array, get_quote_color(n)?
use ifndef in /etc/neomuttrc to disable *some* defaults
	colours, bindings

challenge - preserve order of tagged emails, so that
	copy/save occurs in the proscribed order
- need to add to EL_tagged as it happens
- maildir (dest) needs to tweak timestamps to ensure order
  (or save to mbox instead)
tweaking can't happen in backend -- it only sees one file at a time
need MXAPI for fast copy for when src & dst backends are the same
change maildir to use (save to) timestamp, if set (NOW, if not)
saving emails to IMAP, what are files in underlying maildir?
	files timestampted for most recent (topmost)
	received timestamp
mx_msg_open_new(), mutt_safe_message()
maildir_msg_open_new(), md_commit_message()

BUG: hooks not run on initial "mailboxes" command, but are later

LEAK: buffer pool, alias groups (not *owned*)

BUG: "set charset" should call mutt_ch_set_charset()

CHECK: other NOT_EMPTY config isn't emptied by reset

GH Label has:workaround

VERIFY: no leaks, no UB, âˆ€ startup pats
CHECK: -T output (drop or #ifdef)

in:  echo `sleep 10 &`
	ampersand isn't honoured
	problem upstream too
	it IS in honoured elsewhere

fopen âˆ€ log path & fd
	log fd on close
	macro to get FILE, LINE, FUNCTION
	err Buffer too?
	need flags for perms

symlinks
	when should symlinks be resolved?
	should neomutt show the resolved or unresolved path?

attach_save_dir config
	DT_*DIR* must be dir or non-existent
	stop trailing '/'
	if exists, warn if not writeable
	warn if non-dir
	hmm... default is "./" -> "."
	DT_FILE, no trailing '/'
		if exists, writeable
		or non-existent

endwin(); printf(); refresh()
	makes output go to 'normal' screen
		can be coloured!
	NO flicker
	save the output of ALL commands
	and log it twice: to LOG and normal screen

tag emails, then save|copy -- no progress

shrink 'code' repo, or replace empty and restart
	exclude from mirroring

configure allows --gnutls AND --ssl
	need to warn/fail

:toggle abc<tab>
	should it only complete to booleans/quads? etc

context sensitive help
	use index selection
	e.g. mailing list specific
	index help should be backend-specific

mail_check_stats(_interval) -- A-specific
	use *un*folder-hook to have different settings for
	current and 'other' accounts

log_disp_debug_terminal
	*everything* to stdout

notify_remove() needs data for exact match

<quiet> option for <pipe-message> and <shell-escape>
	logs output raw to neomutt debug log
	mutt_error() if it fails

feature: live filter index as you type, cf sidebar matcher
	fuzzy?

neo maildir header/message cache
	auto-add README.md, saying
	"auto-generated"
	"safe to delete anything"
	list settings for the cache

like lkml backend, run notmuch on IMAP as background task
	select Account/Mailboxes you want to index
	work backwards from NOW
	apply to new mail
	unapply to deleted mail (or tag)
	unapply to trashed mail (or tag)
	implies notmuch is a transparent layer over backend
		for maildir, imap, lkml, nntp
	need rules to cull old entries
	might need separate databases
	better as an external prog?
	notmuch layer listens for new-mail, del-mail notifications, etc

create sample code for inline and out-of-line STAILQ use and others
	where to put it
	use apple and banana gist
	https://gist.github.com/flatcap/105cd65e37d89fc434b2b632e85c3702
	add diagrams
	list users (or helper classes)

save option for summary page info

change "hidden_tags" to be a regex? (#1744)
	backwards-compatible how?
	look for '(' ')' '*' '|' ?
	how do we store it in Config if it has two possible types?

tmp *dir* per email
	mostly unused? NO
	lifetime of email
	save attachments in it

newbie question
	how does mail get into neomutt
	What's an MUA?

<f1> for context sensitive help
	<f2> for help on last error received?
	create functions

dump-config
	INDENT option for A-,M-specific

dump-config SHOW_DOCS option
	if $xyx is inherited, then show and document the base value
	don't doc inherited value
	if base value isn't changed from default, comment it out

deferred config evaluation
	automatic for sensitive variables?
	global contains `script.sh` get_value() evaluates the backticks
	can't be done by config system, only outside can eval ``s
	need to be careful to avoid double evaluation
	don't want backends evaluating ``s either (transparent)

core lib
	NeoMutt, Config, Account, Mailbox, Notify
	can it be made independent?
		need to de-gui Email, etc
	core depends on mutt,address,email libs
	config depends on mutt,address,core libs
	backends will depend on mutt,config,email,address,core
		plus ncrypt,conn

docs: "Since: YYYY-MM-DD (or version)"
	drop after 1 year

mutt_get_name() shouldn't be in sort.c
	NO, it's used

embedded editor
	how?  pty's cf screen/tmux
	can screen/tmux nest?

split travis targets using github checks api
	skip if not relevant
	state: queued, in progress, complete
	outcome: action required, failed, neutral, success
	test: build, out-of-tree, whitespace, install/uninstall, test, coverage, translate, doxy, config

lgtm shield for dev page
https://img.shields.io/lgtm/alerts/github/neomutt/neomutt.svg?logo=lgtm

merge/collate email generator scripts

reduce all branches
how much debug code's acceptable?
	dump text
	dump dot visitors
	TAILQ conversions
	summary
	help --devel-help (backend)

run coverity with idn2, openssl, slang

equivalence for `$a_b` and `$a-b` (underscore, dash, none)
	what about `$ab` ?
	for read/write/completion?
	possible?

fix awful code
	fix_uid()
	assignment `buf[n] = 0` in middle of `if` clause
	else if ((n >= 0) && ((ob - buf) == n) && (buf[n] = 0, (strlen(buf) < (size_t) n)))

after:
	split of name:function:description
	windows with focus
	keybindings with timeout
	split of <sidebar-next> constants to SIDEBAR | NEXT
feature:
	create prefix commands
	<sidebar-open> becomes <sidebar><open>
	same for <thread>, <subthread>
		<limit-current-thread> -> <thread><limit>
	would this break the `bind` command?
		or allow an exception for <prefix> + <function>?
	just <open> means open the default thing with focus
	use also for <skip-deleted><next> / <prev>
	<focus> prefix to be explicit

keep test-config, or archive?
	add readme before archiving
	keep for slist testing?

add .gitattributes âˆ€ C repos

maildir - (advanced, future)
	try harder to reconcile: changed folder plus external change
	if no overlap, don't error
	merge-tool-like
	accept change?  [New/Old]?

release
	add credits for bug raisers too
	list first?
	only *fixed* bugs?
	only *valid* bugs?

fuzz weblinks & twitter
	mention test suite

kill buffer_pool in all libraries

sanitize flags for make test?

vim-repeat feature for neomutt
	. (dot) to repeat last action
	need to define *what* to repeat

test_pattern coverage of mutt_pattern_comp()

move [fuzzer] to [master]
	change script
	if [fuzzer] exists, use it
	else use [master]
	easier for development?

different lists for different jobs?
	email/email.h defines `struct Email`
	Index needs an EmailViewList of EmailViewNode (for gui stuff)
	Notifications needs an EmailNotifyList of EmailNotifyNode (for diff notify types)

context-sensitive help should work âˆ€ prompts,
	e.g. 's' to save email, default location comes up,
	<f1> opens page about saving and the 'save-hook'

fuzz
	list all *parsed* headers
	create 1 function for each
	librarify -> fuzz

fuzz
	sub-header parts
	dates, addresses, list subscription URI

coveralls - travis cron, or master?

change acutest macro to hide 'test' prefix?

adjust default builds to enable testing

pick descriptive names for each rfc for code/config naming
	update rfc 'dot' tree

msg/hdr cache invalid after msg is moved?
	msgid changes!?

buffer pool dump high-tide mark on exit

Does N want a User object
	personal info
	alternate addresses etc
:user - display all "self" info from N->user
	inc pwinfo & all addrs
	password: ***  (':user all' to display)
:accounts => display all A & all subscribed mailing lists

after completion API
	X-Labels define separator
	fix completion

easy? while -> FOREACH_SAFE
	mutt_pattern_free()

syntax highlighting
	group is highlighted in 'lists' but not 'subscribe'
	lists     -group mutt    mutt-users@mutt.org
	subscribe -group neomutt neomutt-devel@neomutt.org

if debuglevel > X, dump all the config after all files are processed
	a complete config dump
	config variables
		(or possibly just the changed config)
		unless the level is very high
	colours
	aliases
	etc

what are the dependencies of all the init.c parse functions?
	mutt_extract_token()
	what else?
	can they be isolated, so we can test config parsing?

rerun uncrustify on new code for ()s

move Buffer functions to separate file?
	file.c
	file-buf.c
	separate out deps
	sketch diagram to check if it's worth it

unknown keys elicit error
	how about after 'bind noop'?

could Buffer.data become const
	-> mutt_b2s -> (const char *) cast

Change all our code from Buffer *alloc* -> pool

lgtm warnings on
	utime -> utimensat
	rewind -> fseek
	gettimeofday -> clock_gettime

split Addr and AddrList, etc?

tests: comment list other sibling functions that are dependencies?

coverage -> web
	easy tasks for test -> 100% fn/code cov
	NO coveralls instead
	shield for each lib: mutt, config, email, addr

MoreArgs() 74 uses -> function?

README
	dev section
	screenshots linked from contrib
library: eliminate void functions
	for easier testing

merge email generator scripts
	move to sample-data/bin

reorg struct Email
	move View (UI) elements last

source dir.d (.d significant) -> find all children or just '*.rc'

librarify all the readdir() code
	bcache, nntp, maildir, complete, browser, help
	then replace with nftw()
	options: recurse, regex match (or lambda), stat(), type file/dir, max-depth
	trap ctrl-c
	what are the callers' requirements?
		list of names?  more?
	callback function to call âˆ€ match

feature: live filter index as you type, cf sidebar matcher

<R2robot> w3m -dump -s -o display_link=yes -o display_link_number=yes -o decode_url=yes -T text/html
<jindraj> elinks -dump -dump-charset utf-8 -dump-width ${COLUMNS:-80} %s

user question:
	is there a way to protect an email from the 'd' delete command?
	$flag_safe

set of fake variables $THIS or $THIS_EMAIL
	representing the current email
		what about multiple tags?
	current selection: search of limit, e.g. ~f $THIS.from
	what about multiple addresses, e.g. CC:
		`~f $THIS.cc` -> `(~f andy | ~f bert | ~f charlie)`

add an option to remove empty header fields from the email
	when composing with $edit_headers set
	no more "^Bcc: $", etc
alternate ways: delete
	autocmd BufRead ~/.cache/mutt/neomutt-* 1,/^$/g/^\v(Reply-To|Bcc): *$/d
hide
	:syntax match hide_header "^\v(cc|bcc|reply-to): *$" containedin=mailHeaderKey
	:highlight hide_header guifg=#606060

ellipsise long mailbox names in the sidebar
	how?  formatter doesn't know type

3-way split display for index, aliases, pgp key list
	does each need domain-specific config
	{index,pgp,alias}_pager_lines

feature: live filter index as you type, cf sidebar matcher

changing the option strings to the form
	(1a)pple, (2b)anana, (3c)herry
	1(a)pple, 2(b)anana, 3(c)herry
means the translators would be free to reorder the options
and we could eliminate the "abc" letter string
this doesn't look so good
	app1(l)e, bana2(n)a, che3(r)ry
perhaps
	app(1l)e, bana(2n)a, che(3r)ry
or clearer still
	(1:a)pple, (2:b)anana, (3:c)herry
	app(1:l)e, bana(2:n)a, che(3:r)ry
the numbers could even be omitted
if the translated string matches the order of the original
what about purely numbered questions, like crypto algorithms
	msgid "(1) apple, (2) banana, (3) cherry?"
	msgid "(1:1) apple, (3:2) cherry, (2:3) banana?"
	(x:y) x:number for neomutt, y:number for human

move temp file into for loop in nntp_fetch_headers()?
	nntp_fetch_headers()
	parse_overview_line()
	mutt_file_mkstemp()

list autosetup release/commit hash visibly
	(for downstream packagers)

body.h header.h (and others)
	Change LOFF_T to long in headers
	(doesn't require config.h)

mbox adata.append should use Mailbox.append

Do Mailboxes need an open context
	thin shim over M
	hash instance flags, e.g. append
Do Views deal with M or MI (instance)?
	MI: might need access to flags

use SPDX headers?

segfault - flush log (nec?)
	log "segfault" & flush?

standardise naming "folder" vs "mailbox" âˆ€ docs

imap browser needs way to mark subscribed folders

with split views might there be multiple focused windows?
	pager1, pagerbar1
	pager2, pagerbar2
	different pagers might mean different Mailboxes
	=> statusbar1, statusbar2
parent window starts with (A,M), displays (index, pager, status) from it

use status bar/pager bar to show focus
	like vim's StatusLine{,NC} highlighting
	what about the sidebar?
	background colour change?  #101010 / #e0e0e0

User-Agent config from bool to expando?

nntp://nntp.lore.kernel.org/org.kernel.vger.linux-kernel

reset screen on segfault?
	useful when debugging
	especially for AddressSanitizer

flags
	missing 'rights' in ImapAccountData Mailbox Smtp

tmp dir for emails
	use maildir
	mbox wants to write Status: R
	check creation of dirs carefully
		so race conditions not possible
	cf `vim -r` recovery mode

new cache config
	cache_dir
	db_per_folder? (for headers)
	put header cache in maildir's 'tmp' dir?  dodgy?
	cache hierarchy: dots or slashes?
	name translations like offlineimap?

are $spoolfile, $mbox, mbox-hook needed?

add issue templates for
	'easy' task
	'questions to dev'

change Score list to use STAILQ

add screenshot to test-render repo

pin github 'help-wanted' issues
	labels aren't visible
	need [HELP-WANTED] ?

shield add 'commits/month' (~50), 2K/year
	https://img.shields.io/github/commit-activity/ XXX /neomutt/neomutt.svg?style=plastic
	XXX = w/m/y

F1 or ? on ANY question -> context sensitive help
	link to guide
	explanation of options

how many questions would be better as tri-states?
	yes/no/cancel (escape/ctrl-g)

mentoring: define the easy/medium/hard tasks
	in terms of what you need to know to get started
	how much help will be offered
	skills like C, revision control, github, compiling, irc, mailing list
	link to helper docs

open() on open M does what?  sync()
	can't tear down M, might be other users (views)
	want to force an update, though
all updates - if they fail, try not to change M, just return -1
if conn lost, then fail, errmsg, then ??? reconnect after (timeout) or stop?
	next check_stats_interval, will try to reconnect. YES
	-1 failed => try again
	-99 fatal => stop, user must re-open -> flag?
	no fatal, for now?  make r/o if nec, ret -1
ctx_open() vs ctx_wrap() - keeps +1 refcount on M
	-1 on ctx_free()
	kill open, mbox_open() then wrap

mxapi retval -99 fatal => close and reopen
eliminate mxapi calls in BEs?  helpers?  wrappers?

eliminate context from MXAPI, mx.c -> context.c
	wrappers ctx_open(), etc
	move {mx,mailbox,account}.{c,h} to mx/
	deps mutt, email
fix postpone, trash, etc

all mx_X() functions to mailbox_X()? mx_X() for mxapi only?
	what about wrappers - i.e. most of them?

'Folder' limits the independence of mailbox.c
	limited to parse_mailboxes()?

after release
	priority to bug-fixes, tidying
	after that, help2, contrib (e.g. colourschemes)
	so that others can help us

path_canon
	check that Folder, LastFolder, etc exist before using them
	or, force set them at startup

merge mailbox.c and mx.c?
	now that there aren't any deps
	may need to move parse_(un)mailboxes out
	no? mailbox.c for Mailbox-y things, mx.c for mxapi stuff

RE-opening mailbox
	postpone, trash, edit msg, send message (fcc ^)
	all suffer from dead mailbox ptr

BUG: tag-prefix doesn't work with # (break-thread)

Issue template for DEV release
	version (commit hash)
	backtrace
	actions

data type INTERVAL, numeric
	accepts 1s (sec), 1h (hour), etc
	displayed as?:
		1h
		3600
		3600 # 1 hour

mx_mbox_open -- force type?
	arg 0 => probe
	'n' == MBOX, etc

split up opcodes by action and detail (sub-action)
	18:03 <adray> You know how we define virtual-mailboxes as "MUTT_VIRTUAL | MUTT_NAMED". Would it be possible to do the same for opcodes? So instead
		of OP_MAIN_VFOLDER_FROM_QUERY_READONLY, it could be OP_MAIN_VFOLDER_FROM_QUERY | OP_READONLY?
	18:04 <adray> (this also ties into your OP_DELETE code, possible to do OP_ATTACHMENT | OP_DELETE)
	18:06 <flatcap> currently, they're an enumeration
	18:07 <flatcap> I wonder how many combinations would make sense.  how many we'd need to make it pay off
	18:10 <flatcap> hmm... quite a few
	18:10 <flatcap> all the SEARCH_X could become SEARCH | X

icommand swap back (err -> -2)
	MUTT_CMD_ERROR   = -1,
	MUTT_CMD_WARNING = -2,
	need to check/fix all callers

use help bar for menu breadcrumbs
	compose, attach email, view attachment
	stacked menus

have lambda function to add Emails to an EmailList
	bool is_tagged(Email);

help log level
	for each mutt_error/warning
	also log a link to the relevant help page
	maybe not visible on screen (one line)
	and not logged, but visible in <show-log-messages> window

context
	maildir_update_tables no longer used

âˆ€ oldx = x; fn(); x = oldx;
	parameterise (x) (e.g. Sort)
	i.e. find functions using global/config variables

objects must have X_new()/X_free() pair, or neither
	check existing
	51 X_new()
	55 X_free()
	148 struct
	292 [cm]alloc
	find/distinguish between
		struct - simple, data
		object - complex, actions
	data still needs free for ptrs
	too simplistic?

reduce contributors to 6 months?
split authors at 6 months? and 'others'
	split at 3 months?
	call recent *active* developers
	change at release time

we have A-specific config
	A-specific commands and hooks too?

command to switch account - multi-selection list?  menu?

change pager for <show-log-messages> to start at end of file

.desktop for nntp:// -> neomutt

factor out the code for command "mailboxes"
	so that imap/nntp don't have to create a string
	"mailboxes QUOTED-NAME" just to have it parsed and de-quoted

create synonym <move-message> for <save-message>?

is smtp a BE?
	write-only mailbox
	auth, connection
	definitely need an smtp *dir* and tidier API for sending
	encapsulate vars in dir

reddit mailbox backend?
	see rtv project (python, curses)

rename storage globals to match the neomutt commands, e.g.
	UserHeader -> MyHdr
	or GlobalListMyHdr?

does tree layout of M -> a dummy root M? âˆ€ BE? probably
	is "/" the root?
	is "INBOX" the root?
	where does "INBOX" live?
users won't want M under INBOX

sileht/imap LONGSTRING -> PATH_MAX * 7
	comments for MData

use travis on [master] to update/deploy to gitlab?

rule for BE only new M if A and MData AND AData full set

Broken?
	FCC + $record = ^

deprecate imap_logout_all
	create <logout>, tie into mxapi
	or <close-mailbox> for imap/nntp
	forcibly break connection
	free resources?

get 'build' script to log commit hash
	simplify "git build"

pop: add "neomutt -z" support?

timeout hook âˆ€ BE?

ctrl-C âˆ€ BE âˆ€ mxapi functions

how does reply_regex fit into index and replying?

maintain stable numbering in the index
	(mailx does this)
	each email is given a sequential number
	new emails get a higher number
	deleted emails' numbers aren't reused
	what happens if the list is resorted?
		numbers end up randomised!
	what about patterns for message numbers
		ignore missing?
		what about -5,.
		find 5 messages, regardless of number?

connect to server using openssl
	openssl s_client -connect 10.8.0.1:imaps
	then use imap commands
	a1 login USERNAME PASSWORD

login problems: help
	try imap://username@imap.provider.com
	try imap://username@provider.com@imap.provider.com

some MxOps are compulsory, some are always implemented
	drop checks for these?
	what about if (adata) assume free_adata() exists?

fedora build docs
	missing for `--everything` build
	lua-devel, db-devel, gdbm-devel, qdbm-devel, make, libidn2-devel
	ctags, w3m, doxygen, ccache

try alternate imap folder separators, e.g. | :
sizeof(Mailbox) = 8392
	2*4K (paths) + 200 bytes

browser
	changing sort doesn't force redraw

trap more signals?
	cleanup files (not the partial emails) on exit
	e.g. attachments

Quoting
	list of special items: $var, $VAR, \n, etc
	have flags for each
	literal backslash \\
	behaviour of each unquoted, and each single quote type
	then all pairs: '"X"' or "'X'", etc
	single, double, backtick
		'X', "X", `X`
		'"X"', '`X`', "'X'", "`X`", `'X'`, `"X"`
	triple?  a lot of processing
	what about unicode curly quotes?

no pattern to search by label (or regex)
when checking for new mail, distinguish local from remote (cheap from costly)?
attach style sheet to email - mutt color commands - email-specific

announce <named-mailboxes> on dev ml

imap A has Config:
	"user" inherited from "imap_user"
	"imap_user" synonym for "A:user"
âˆ€ imap config, setup synonyms without "imap_" ?
	what does dump display?  tidy version or canonical?

validators interfere with doc gen (manual.xml)

deprecated config - default value is help string
	what about synonyms that will be deprecated?  same?  yes (ish)

index_format expandos for "Waiting for info"? hourglass?
libmx - no curses - what would be in it?

define config *functions* - named config scripts
	perhaps named f-USERSPEC -> bind <f-userspec>

custom help bar text, like vim's tab bar, status bar -> lua?

option for folder auto-discovery
	<mailboxes> everything server has
	or all dirs and subdirs
	make that the default behaviour?
	unless <mailboxes> performed or check_subscribed set

new repos:
	disable issues
	protect master
	add readme
	add license
	archive

unify naming of conn_*() sock_*() functions

nntp allow bare host urls
	nntp://news.host.com  (no trailing slash)

M - messages menu
	show name of debug file in status bar
	no point -- the pager automatically deletes it

create 'let' command for maths?
	like set for numeric
	confusing?  probably?

index_sort = date,thread:rev-date?

<thread-SCOPE>ACTION like ;d (tag-delete)
	<thread-latest><display-message>
	<thread-first-new><display-message>
	only for threaded & collapsed

fake typedef for qsort functions?
	already have sort_t -- qsort compatible?

maildir:
	readdir()
	set errno to 0 first
	check after and perror if nec

twitter "Re:" -> default config?

users
	set flp=^\\(Cc\\\|To\\\|From\\\|Bcc\\\|Subject\\\|Reply-To\\):
	extend to all common headers
	include vim's default settings
	need to set 'ai'
	formatoptions needs 'n'

create a coding 'charter'
	what's expectedzh_CN.utf-8zh_CN.utf-8zh_CN.utf-8
		from you
		from us

status/pager format
	collapse the status bar and command line?
	what about error messages?  timed?

option to mailcap-view objects from the browser (on attach)

Easy: postpone question to three-way
	(S)ave, (D)elete, (C)ancel

Disable some default keybindings?
	e.g. <print>, mailing list functions
	or have sample config rc snippets
	or change to more key-chords
		tag-X, tag-Y, tag-Z
	become
		tx, ty, tz
	snippets in /etc/neomutt/*.rc?
	/usr/share/neomutt/snippets/

have a 'theme' command for use in restricted situations, like
	neomutt-tutor

BUG: message says 'purge' but actually deletes (to trash)
	$trash set, 'd' Delete, vs 'D' purge
	then leave folder to commit

browser
	need clearer feedback *what* we're looking at
	IMAP mailboxes, IMAP directory, local directory
	and clearer ways to swap between the choices

megabuild
	combine "git build" and parallel
	use git commit range + clist
	nested build dirs

smime_timeout missing LNUM

magic "alias" mailbox stored on server
	multiple emails
	subject determines how it's processed
	signed for safety

if user's sendmail fails, notify the user

difference between Body and Attachment
	which members are used for which?

need unaccount [name|*]
update roadmap page
my first PR page
README donate

convert mutt_expando_format() and family to use intptr_t

email
	move 'ignore' code to regex? (replacelist)

create custom error functions, that do the domain-specfic lookup, e.g.
	mutt_regex_error
	mutt_imap_error (exists)

mutt_perror_debug makes two message calls
	is the debug one needed?

add "I'm a developer" issue template
	make them work harder

devel guide: "how to bisect"

param order differs from other functions
	make_reference_headers()

bug
	can't encrypt-to-self if original email isn't encrypted

packagers
	gpgme dep?  enable by default
	deprecate old ssl/tls versions

struct Message
	where does this fit into the email?

web key directory for gpg keys for neomutt

nntp all message ranges should be checked against the context

Header data #ifdefs
	drop POP/NNTP #ifdefs for libemail

html email
	I use this: text/html; elinks -dump 1 -config-dir ~/.mutt/ %s; nametemplate=%s.html; copiousoutput
	with this elinks.conf http://thorsten-wissmann.de/p/6207785e4784977712fc213a687ad033
	with this, the urls are footnotes at the end and so the rarely wrap

man neomutt should tell a beginner everything they need to know
	or where to look for more

flags variables/members -> unsigned
	every member commented with sample flag name

separate parsing from pre-processing step
	standard library routines to parse
		list the quoting characters
		flags for escaping, etc
	custom bits to perform shell stuff?

have a system for 'tainting' variables
	the sensitive variables are tainted
	if I 'set my_var = $imap_pass' then my_var is tainted too
	tainted variables will not
		be displayed on screen
		exported/expanded for external programs (including lua)

rename members
	bools to is_x, has_x, etc
	amounts to num_x, nr_x, etc

move a perror to mutt_mkstemp()?
	logging in libmutt -> gettext() etc

test link() / linkat() on a deleted FILE*
	limited to the current device

bug?
	attach a file
	<get-attach> but mailcap doesn't have matching entry for (text/plain)
	atatchment doesn't get deleted after the email is sent

how do you send encrypted/signed email from the command line?

create a reply flowchart
	who from
	who to
	etc

calc libmutt test coverage as %age
	use coveralls?

expand reviewers to all frequent committers?

put docs for [travis], [release], [translate] into original commit message
	add README.md to [management] for each

add lua test to release
	neomutt -B -F contrib/lua/test_lua-api_runner.neomuttrc

create specific README.md in each top-level neomutt branch

pre-release: sync acutest and autosetup?

mailing lists
	a general command for lists
	"Current list: (s)ubscribe, (u)nsubscribe, (p)ost"

release notes
	add commit count?
	to show our busyness

option for insertable horizontal divider line in the index
	(simply underline (or overline) one line of text)
	configurable positions, e.g
	this week | this month | old stuff
	config: 1w:1m -> three sections
	might interfere with syntax highlighting

(neo)mutt can't read maildir emails
	it'd be useful to:
	neomutt -f maildir/cur/email:2,S
	subclass of MUTT_MAILDIR?

use neomutt as a viewer/pager for emails
	like less(1)
	would require a crazy amount of code changes

remove umask code from mh.c
	redundant due to `umask(077)` in main.c

State object -> library
	excluding AttachmentMarker

use packagers' team to announce build changes

58 mutt_mktemp in ncrypt/

shield for freenode/irc --- silver searcher

need (vim-like) foldopen option for search matches
	what else should open a fold?
	jump?

setup function to make aliases

uniq history âˆ€ *.po msgid for both (neo)mutt

relpage on web
	doc release notifications
	web/twitter/etc
	https://github.com/neomutt/neomutt/releases.atom

when we have Account objects and all imap connections are live
	how often are accounts updated?
	lower frequency for the non-current account?
	options for equal-freq, half-freq, off?
	just update the spooldir?
	keepalive option?
	disconnect completely?

New/updated primitives:
	Path
		filesystem
		could contain
			~/
			~user
			$HOME etc
		symlinks / realpath
		relative/absolute
		stat
		file/dir
		tmp path?
		deleted?
	Command
		contains a Path to executable
		list of args
		function to serialise
		last retval
		FILE/fd	or in/out/err
		bool fork?
		bool alt-screen?
	Url
		scheme
		host
		path
		user
		pass
		list of params
		function to serialise

relative time option for the index_format
	3h (ago), 2d, etc

are any config strings required to be MixedCase?
	Maildir?
	can we just lower-case them?

custom arrow cursor using expando
	colour as usual
	conditionally replace %4C with arrow to save space?  HOW?

ask config system for type completions?
	make sense for enums, what else?

autocrypt layered support
	strip off/add wrappings

tests for 'list'
	8 items in list
	âˆ€ del first
	âˆ€ del last
	âˆ€ del middle (n/2)
insert tests too
	first only
	last only
	middle
acutest âˆ€ independent types (move to library)

announce protonmail config

mbox has 8KiB buffer.  test overflow with HUGE headers
	test other mailbox types

padlock icon for protected (encrypted, autocrypt) headers

cron 12/06/2018 drop web changes dir

need for TAILQ_COUNT()?

make E123 a parameter for mutt_error()?
	selective display?

":help error" look up last error message
":help" look up context-sensitive page

mailbox explanation -> web page / dev ml

[somehow] build in URL shortening, OR
build in urlview, tag urls[1] or abbreviate them
menu showing full options and open button
summary ability - move urls to the end

toggle-mapping / multi-mapping
bind/macro key FN1 FN2 FN2
that'll break if they get out of sync!

analysis
	add clang-tidy
	add uncrustify
	add lcov / coveralls
	codespell
	lgtm.com - https://lgtm.com/projects/g/neomutt/neomutt/
	-O2 -D_FORTIFY_SOURCE=2

X-Labels lost if "unignore X-Label" isn't used!
	suggest in labels docs

Fix grammar of multi-part/-lingual messages

move mkstemp, fmemopen, O_TMPFILE to mutt/temp.c?

file locking - could log the caller

upstream synonyms
upstream implement message Q size
upstream add synonym sort method

update bash complete for configure
	push to management
	dev ml

mutt_warning => instructions to avoid in future

option to open message window on *verbose* errors
e.g
	sb_sort is an enum, valid values are
		a
		b
		c

~b search shows % complete for *each* email, not for the 1000s in the folder

when running child processes
	capture all their output stdout/stderr
	display on summary page?
	dump to real stdout?
	makes async easier

should default keys be concealed (n -DS)
	pgp_defaut_key

open(2) O_TMPFILE
	mktemp
	fmemopen

linux only:
	O_TMPFILE
	Simple alternative to mkstemp()
	use if available

SIGUSR1 link to #2
	mark hard, close

neo admins -> all public org members

split up complex actions like <next-entry>, it becomes
	<next-message>
	<open-message>
	<filter-message>
	<color-message>
	<display-message>
	<mark-message-as-read>
this gives the user more control over actions
allows the user to add/remove steps
the default binding keeps the normal behaviour

move more /etc defaults -> mutt_config.c
	minimise the default config

test bodystruct:
	imap folder full of BIG emails to test %X
	(with varying numbers of attachments)

browser sort order of =abbr mailboxes
	not consistent?
sort=thread?  AC toplevel then abbr mailboxes
if !thread, don't abbr

users ml
	set "ask" config example

update list of all globals/configs
	free everything on exit

config vars are isolated, how do we isolate all colours?
	(and attrs) from ncurses?
	-> testable

post-send hook?
	entering-the-index-hook?

STAILQ Hooks doesn't show up as global
	cat Universal Ctags help?

cppcheck docs
	cmdline
	config.h needed
	-D needed

bug "set charset" doesn't trigger .mo selection
	should call in mutt_ch_set_charset()

pkg-config which platforms supported
	requirement on those platforms
	which not supported?
	cygwin? macports? homebrew?
	do we keep the machinery?
	bitrot in rarely used configure checks?
	are we guaranteed the same names for packages?
	will any platforms have partial support?
	two separate auto.def?

neomutt-test-configs.sh
	do each build in a separate out-of-tree dir
	run all in parallel
	what about logs?
	mktemp for log files, then cat?

TEST for log file failing to start

how many ways can conn/ connect?
	plain socket
	starttls
	tls
any others?
* all the encryption methods

mutt-wizard: contact, adopt?

use inotifywait to find all the build tmp files and .gitignore them

deprecation -- offer list of old names
	so users can grep -f

user ml --- any visually impaired?
	what can we do to help?

investigate FUSE imap fs

enhancement
	<tab>-completion for ! (shell) commands
	expand executables on $PATH, or dirs
	expand files/dirs thereafter

replace realpath

web -- make news page a dupe of the twitter feed

incorporate valgrind into unit-tests

make plan to deprecate list of "Features"
	need something better

create exploded diagram of Index/Pager/Sidebar screen
	label all parts
	use svg so it can be translatable

pgpewrap -- %(...) -> repeat group for recipients
	`%(-r %R)` becomes `-r 1 -r 2` etc

bug in nntp cache
	where's the header cache?
	why aren't the body cache files in the nntp dir?
	why is the file called ".active" hidden file?
		or is the host missing?

add "Add profile picture" to welcome letter

mutt tips
	create http-reading mailbox type
	needs to be able to scan host (or read an index)
	served as html by CDN
tls_set_priority -
mutt tips
	RSS feed?
	we can control the length of the history
	or deprecate tips
	keep a large backlog
	rotate through useful beginner tips
	still need local storage for new vs old message
	tips *IN* rss feed, or is the feed just an index
	actual articles are html urls

Use vim-like Ennn error messages
	give every message a unique number
	every one documented in docs
	internal errors too -- "Please report this bug"

tmpfile name neomutt-*DRAFT*-XXXXXX?
	possible?
	useful?
	or set env to pass info to editor

âˆ€ $ENV, code default, mutt_config.c, system config, user config
	doc and list priority order -- in $config docs!

assert - does it call atexit
	no - abort() (SIGABRT)
using assert means trapping SIGABRT for endwin

mutt_randbuf has 1MB limit
	assert
	we only call with a max of 16

notes on prompts that require ctrl-g
OR pgpkey selection should quit on <enter> (empty)
	is empty valid?

shorten changelog and link end to historic version on github

unify fd vs FILE*?
	might need FILE* for fprintf formatting
	also it's buffered
	does that matter?

copy startup tests 1-37 on dev/ webpage

startup: doc all routes to exits
	call graphs?
	coverage?
	from call graph work out which variables are ref'd
		NO: all globals could be

libconn
	conn/getdomain.c -> conn/dns.c
	refactor init.c dns functions to conn/dns.c
	put dns code in a separate thread (if we keep it)
		need test thread code
	move getaddrinfo, getaddrinfo_a into conn/dns.c
		check deps

web/readme bigger deal about starring/donation

mutt_bgrun - periodically run waitpid()
	keep list of file <--> pid mapping
	viewer goes away; delete file
	close files on neomutt close?

put donate link in GH template in comments?

curses could be replaced from the outside in
	1) add 3rd config option
		[curses|slang|tinfo]
		tinfo still links with curses (for now)
	2) replace initscr() & endwin()
		viable?
	3) replace cursor movement/lookups
	may not work if initscr does some curses setup too

embed an asciinema demo of neomutt into our website
	need all sample config too

should logfile be CRLF on windows/cygwin?

attachment viewing -- keep a list of tempfiles, either
	delete after x mins (configurable?)
		some programs *watch* the file, so they'll get upset after x mins
		need to keep until exit
	delete all on exit
	they're tmpfiles so should be in /tmp?
		rather than ~/.mutt/tmp
		=> system can clean them in worst case (crash)
	or keep the last 'n' files, e.g. 10

do we need a config URI object?
	store raw after relevant encoding
	split into fields for code

connecting to gmail with options:
	-gnutls and -ssl causes a crash in mutt_conn_find()
	check

restart POP after connection is broken/lost (like IMAP)

option to make buffer auto-NUL-terminate
	after every add*()

check for !*var
	some string vars -> (str[0] == '\0')
	some int vars -> (*num == 0)
	LOTS of them
	worth doing?

might want to add a "Other comments" heading at the end of the PR template
	rawtaz (irc)

do we really need: "set rfc2047_parameters = yes"
	why not always display a human-readable string?

MAILCAP / mailcap_path
	docs imply you can specify a PATH to files
	check RFC for clues
	update docs

hibernate-hook - would one be useful to anyone?
	after hibernate
		how does mutt know?
		does mutt know?
	do we need a hook?
	where's mutt waiting? key loop?
	notice jump in time?
	what about ctrl-Z suspend/resume?  same?
	does hibernate need a time option
	if (Î”t > n) then fire hook

when you force an imap update: <imap-fetch-mail>
	a notification: X new mails would be nice

turn $sort into a string-list of methods
	set sort=threads,last-date-received,...
	allow more depth
	if sort is a list, ignore sort_aux?

fix default /etc/neomuttrc so that neomuttrc.vim doesn't show errors
	color header brightred default ^(From|Subject):
	last field isn't quoted and shows as an error

isolating libmbox means we can test lots of address code, etc

rename *idna* -> *idn*
	A == applications!
	but all the underlying functions are called idna

default (system) config
	ifdef VERSION > 20180101 set ignore_disabled_config

refactor idna code to make the entire file build-conditional

use idna.h IDNA_ACE_PREFIX "xn--"

vim-airline test po fix on old non-sync vim
(rhel6/7) create PR
neomutt/release

list autosetup release/commit hash visibly
	(for downstream packagers)
Update AUTOSETUP/INSTALL (or merge)

buffer *alloc* - make some space
_peek_ - get next token (save ptr), don't move dptr
	skip/drop_next_token
break up extract token - don't lookup '&var'
don't process `cmd`
what str cmds are used to put data in a buf,buflen array?
have mirror set of buffer_strfcpy, etc
strfcpy the only one needed
sprintf -> buffer_sprintf
(re)alloc as nec
79 buf,buflen + ~190 possibles
buffer_dupe()?
buffer_swap()?

who frees the charset hook regex lists?
hook.c?

make the shutdown cleanup (freeing memory, etc)
	#ifdef DEBUG
	nice to check, but not required for general users

configure devel options (for beta features)
	./configure --devel-FEATURE
	after time they become --FEATURE or built-in

document the 'hidden' uses of folder-hook
	when saving emails to $record

create neomutt account on docker.io
	advertise to dev list

if config (mutt_config.c) is de-centralised and docs are sectioned
	/u/s/d/neomutt/section-N.md
	how do we link ":help [OPTION]" to the right file?

teams
	distro/X  X=debian,homebrew,etc
	code/X    X=notmuch,reviewers,etc

deprecate AUR repo & notify

drop mailmap, use management one

move ncrypt/crypt.c disable_coredumps() to init
	there we could disable coredumps UNLESS
	the user enables debug logging

do something about assert
	one file has it disabled
	one file has it enabled

autosetup
	tags target?
	distclean rm tags
	delete *.Tpo?`

autosetup
	make V=0
	create min-build
		keep dirs

DEFINE library
	no mutt deps
	fully doc'd (doxygen)
	no _() text?
	no deps
		no external headers
		no global vars / structs
	unit testable
	coverage (not yet)
	no #ifdef's?

neo-vim repo
	project description
		tags
		topics
		icon
	fillout insights (communities) .github
	announce to users ml
	docs -> web/dev, pathogen, vundle, etc, see other plugins
	vim "team"?
		limit neomutt.vim access to them
	merge vim keys?

autosetup
	.deps
	.objs
	from min-build

muttrc ifdef
	/file absolute
	./file relative source

logo competition
	cartoon dog
	head
	letter in mouth
	need to look good in b/w
	and in line drawing

audit/testing/coverage
	trace one function at a time, check all
	vars defined âˆ€ inputs, doc'd coverage
	test code

"set ?imap_pass" show sensitive data
	what could we do about it?

neomutt user maintenance
Log person's last:
	commit
	comment
	issue
	team
	private member!

doc all refs to "mutt -v" output
	-v make the enabled hcache more visible

bug: can't copy/save email without decrypting it

have a different index_format for indicator line?

connections
	raw - fd - host, port
	ssl - encryption - certs
	imap - login - user, pass
	tunnel?
	who negotiates ssl, sasl?
	how does opportunistic ssl work?

use summary log for informational info
	Sent email "Subject" to
		ppl-list
	Received 4 new emails in 2 folders
	this is level 1 info
	need much more of this

mutt-1.9.1
	attach mac text file (CR) OK
	neomutt eats all CRs

where is punycode encoded/decoded?
	extract to lib and test

keep and display different address parts
	raw (from header)
	canonical (parsed)
	comments
	display (de-punycode)
	comment string includes "()"

run gpg signature testing asynchronously (when opening email)
	would need placeholder in the email
	would need to redraw/render the email after
	thread safety

libfile
	rc = read_into_buffer(filename, buf, len, *fp)
	if fp is not given the file will be opened, read, closed
	if fp is given the file will be read, not closed
	rc
		OK (file fits into buffer)
		OK_MORE (filled the buffer, need more space)
			perhaps stat the file and return how much
		ERROR (see errno)
			or have a simplified error
			with msg lookup

libfile
	append_file("name", buffer)
	for functions that don't need to do anything else

turn some config vars into (string) lists
	hidden_tags (separator = ',')
	mailcap_path (separator = ':')
	send_charset (separator = ':')
	split at config level, then call the validator on each list item
		no, call validator on parsed list

all global variables should be set using the config mechanism
	therefore changes to globals would trigger notifications
	this means we need fake "config" items
	(tagged to be invisible to the user)
	like all the "pseudo" bool values

lib/address.c and rfc822.c
	NOBODY is using error codes:
		ERR_BAD_ADDR_SPEC
		ERR_BAD_ROUTE
		ERR_BAD_ROUTE_ADDR
		ERR_MEMORY
		ERR_MISMATCH_PAREN
		ERR_MISMATCH_QUOTE
	or globals:
		RFC822Error
		rfc822_error()
	functions aren't resetting error code on success
drop them?

research all RFCs relating to email, etc
	graph of dependencies / obsoletes

how do we test the static functions in the libraries?
	make *everything* public?
	#ifndef TESTING
	#define STATIC static
	#endif
if not, they must be completely robust

up-to-date list of functions/data for each library, split into:
	public functions/data
	static functions/data
one (background?) colour for each library
one shared colour for ALL static functions
use ctags to generate lists

kill ISSPACE macro -- no benefit to having it
	what about the (unsigned char*) cast in it?

xdg/neomutt/CONFIG
	config is standard, rather than (or as well as) neomuttrc

mutt_account_tourl Account arg should be const

tests on lib should also be run on 32-bit arch

2017-09-27 #mutt
<fire2199> by the way... why is there not a pre-defined variable for setting the config folder?

pgp-hook is synonym of crypt-hook
	needs deprecating, too

find "sprintf(x->data" for buffers -> buffer_printf

update _dev/signing.md
	wget https://github.com/neomutt/neomutt/archive/neomutt-20170912.tar.gz
	wget https://github.com/neomutt/neomutt/releases/download/neomutt-20170912/neomutt-20170912-CHECKSUM
	gpg2 --verify neomutt-20170912-CHECKSUM
	sha256sum -c neomutt-20170912-CHECKSUM
	test using build user

change feature neomuttrc examples to be useful working versions

Create LTS release branched from 2017-09-12
	until all big features are done
Change all version strings to YYYY-MM-DD rather than YYYYMMDD?

mutt -DX read config and display deprecated options
	and their replacements

mutt cmdline option to show config search paths?
	probably not worth it

deprecate muttrc in favour of neomuttrc
	1 Restore all the mutt search dirs
	2 Drop the dated/versioned configs (nobody used them)
	3 Make a release
	4 Start deprecating muttrc (with warnings)
	5 Wait a few releases
	6 Drop muttrc

"wrapmargin" config option needs deprecating like the synonyms

notifications happen when something happens, e.g. new mail
consider a "no longer any more new mail" notification
negative acknowledgements
each notification
	would be independent
	could be on or off
user is notified when a notification status *changes*

change safe_rename
	ENOTSUP
	EOPNOTSUPP

merge and drop "scripts" top-level repo

test fcntl and flock on /var/spool/mail/mutt file

remote config option
	user logs in - host, user, password
	first email in inbox (artificially old) contains config
	email is encrypted to yourself (optional)
		need local private key
	ask user: "Apply (verified) remote config?" (optional)
	separate files?
		have an entire folder for config
			magic name - neomutt-config
		alias files
		mailcap
		certificates
		anything but caching files
	have email signed -- easily verified

pgpinvoke doesn't escape the filename of the email to encrypt (last param)
therefore
	set tmpdir = "~/.cache/mutt three"
makes it impossible to send encrypted mail

change build to install to ./install
alter my .gitignore to ignore ./install

imap keywords
	work out limitations
	test postpone delete
	expandos with nested threads
	test cases and instructions

need neomutt glossary (search first)
	add to guide

ask lists about slang usage
	drop slang

add rfc1847 gpg
add RFC1522
utf-7 -- RFC 1642, superseded by RFC 2152
rfc3986 - URI

listen for tags -- list somewhere public
https://github.com/neomutt/neomutt/tags.atom

add make tags (to exclude junk)

in pager, which objects are precious/vunerable
	which might be changed outside of the pager

magic -- set *string*, save *int*
	retrieve which?
	or both?
	retrieve string from Mapping[value]

predefined buffer macros (static)
	=> addstr could fail (out of space)
	easier memory management
	BUFFER256, 1024, etc
	allocate buffer for you & memset it

are imap vars used outside of imap code?
what about sidebar, browser, etc?
keep their own var lists?  register at startup?

now that IMAP, et al, are compiled-in, what's in the docs
	that might be excluded (makedoc conditional)

two stage index update?
	hide, refresh
	update
	NO, index vars would still be wrong

ask neou for logo suggestions
	hold competition for art?

use install-sh $(INSTALL) instead of cp

parse_set: unset DT_RX doesn't work

FS layer
	211 fopen, 346 fclose, 285 unlink, 70 rename,
	mkdir, mktemp, stat, exists, (read|write)_(string|char)
	85 seek, flush
	tie in with mmap
	tie in with memstream/buffer/tmp
	distinguish tmpfile, generated help page, partial email
	memstream -> better buffer interface
	canonicalise path (realpath)

Misc
	where are the "source" relative docs?
	alias_file, certificate_file, etc aren't relative
		alias_file
		certificate_file
		debug_file
		history_file
		ssl_ca_certificates_file
	relative to what?
	all *_files relative to:
	1) the source file they're read from
	2) current working directory
	3) User's muttrc? NO
	4) $XDG_CACHE_HOME? NO

Decide
	#ifdef DEBUG
	move some web/discuss to "hard"
		the ones we really want
	new variable type MAILBOX
		could be a "/path" or "+mailbox"

Searches
	list all GH matches
	10m - classify
		old, config, new, different

add release count to changes doc on web

modular mutt: imap & nntp share some functions
"subscribe" -- both should declare and mutt notifies both?
or can it tell whose command it is?

devel list - favourite vim plugins -- promote mine?

relative 'source'ing of files doesn't work if the base is a symlink

create an address interface for lookups / completion
	basic plugin uses aliases
	notmuch can supply its own plugin

pgp_invoke_decode
	This is historic and may be removed at some point.
	lots of similar functions being redirected
	strip out?
pgp_application_pgp_handler
	needpass (bool) starts as -1!

warning on muttrc synonyms
	this will be removed in x months
	this will be removed after DATE (better)
	suggest correct command

devel ml favourite git config

off_t used in browser.h
	don't need OFF_T
	ftell long vs off_t

linux kernel
	IS_ERR, PTR_ERR
	container_of
	LIST, list_for_each, etc
	ARRAY_SIZE
	BIT
	min, max, typeof
	swap
	round_up/down

vim-like scrolloff option for pager/index
use travis env / website to control build verbosity
sort format string switches

PR requirement all commits build
	make dist/clean on merge
	not nec of each commit

email
	folding the index
	gettext -> non-optional?
	wide ncurses mandatory?

conceal IMAP password

READMEs tidy review
index folding cf vim
vim plugin - cino options etc

travis/neomutt-test-configs configs & build tags
mutt -D options
shrink authors (split out)

with options split into sources, mutt -D could omit entire sections
	if nothing has been set, e.g.
	all of pop_* have default value

simplify y/n questions.  no more "Are you sure?", just
"Quit? Y/n" -- all ask-yes, ask-no

renew s/mime cert & test & desc steps

create screens overview of all areas of mutt.  provide:
	sample data/emails
	sample muttrc
	instructions to repeat

plugin fs-layer
	basic: files + stat, etc
	adv: file, inotify
	others: fmemopen, mmap, libuv

doc sample branches
	web page with list

neomutt-test-config.sh
	--save dir
	put mutt's in an output dir
	log each numeric name with the compile options

cmdline --about links etc

MacOS iTerm (and OpenBSD's xst terminal)
	Ctrl-O doesn't work
	"stty discard undef" fixes it
some other terms too
	rxvt-unicode, openbsd 6.1 - verified
	"stty flush undef" needed

deprecate ChangeLog*
	they're in the git history
	or abbreviate with extreme prejudice

use signal to interrupt IMAP connect
	at time of resume (after suspend)
	systemd service?

Project management:
	contact distros
	organise web updates
	search for patches

change #ifndef's to #warning too
	#ifndef SYMBOL
	#define SYMBOL
	#warning "Please tell neomutt devs about this
	#endif

double-width index (continuation of first for wide screens)
	| side | index1 | index2 |

coverity -- some code untested due to config options, e.g. openssl
	need coverage test

use *mutt* to generate sample mailboxes
	create folders
	create emails
	etc

branches in neomutt repo may be eligible for a free rebase
	develop in your own repo, and they may not

create doc repo
	have neomutt repo as a "fixed" git submodule
	or a submodule of a doc-gen repo

warn on option synonym usage
	{ "pgp_autoencrypt",            DT_SYN,  R_NONE, UL "crypt_autoencrypt", 0 },
	{ "crypt_autoencrypt",  DT_BOOL, R_NONE, OPTCRYPTAUTOENCRYPT, 0 },
	crypt_autoencrypt is the visible option
	warn if pgp_autoencrypt is used

all example muttrcs
	bring them up-to-date (valid options)
	or delete them

2017-03-22 #mutt
	14:43 <wayne47> is there a way to specify a unique SMTP server per mail box?
	14:44 <wayne47> so that when I read mail via imap from foo.com, outgoing mail uses foo.com and when I read from bar.com, outgoing mail uses bar.com (etc)?

web toplevel dir
	/muttrc
	move all samples from the guide
	link guide to samples

topics for my github repos, icons?

mutt marks -- are they mailbox-local?
	can we distinguish (like vim) between
	`a  mark in this index
	`A  global mark (potentially in another mailbox)
		is it safe to change mailboxes without warning?
		I suppose macros do this

convert the bug-fixes section of the travis build.sh to work on the upstream branch
	(test all commits, with a small spread of configs)

2017-03-06 #mutt
	17:40 <parosen> "set -o vi" functionality in mutt?

when saving a file (being asked for input),
	add a mechanism to expand a mutt variable
	like vim's ^R

create muttrc that undoes everything that might be in /etc/Muttrc
	:reset all
	:uncolor *

po
	don't need line numbers for git
	might need them for poeditor

webpage: new status
	wip-help -- "Work in progress - Please help (instructions)

add template email for newbies getting credit

.gitattributes
	ignore changes to .travis.yml
	from merging branches
	hmm... but it'll be in all branches
	does this make sense?

investigate:
	global config
	list all the IMAP variables
	list all their uses

work towards: no commit without an issue
	A reviewer's "OK" for an idea can come from:
		issue
		IRC
		mailing list

save backlog of messages in a deleted file!

issues for upstream sync - share the lot

Releases
	comments = docs
	translations too - in either release

imap flags summary

example notes for a PR
	don't walk away
	you need to work with us to get it merged
example notes for an issue
	need to be around to help us find the problem
	might need to test the solution

doc how to become a reviewer

issues: shooting for zero
	try to get down to zero issues/PRs
	what about long discussions?
		close them
			two weeks after last comment
			four?
	what about unlikely enhancement requests
		doc on website (with links)
		close them

filter to turn :+1: into emoji character

link to OS *guide*

conceallevel (for pager/index)
	0 off
	1 conceal
	2 conceal and squash
for index, 1 list "there are 'n' concealed threads"

irc notes: assume humour before anger/offence

pager colour filter start/stop regex + lua script?
what does it insert?  or does it call back to get mutt to highlight?
script is stateful

squash or not - consider need to revert 1 piece

flowchart for sending an email, showing:
	screens,
	<functions>
	hooks
	include signing
	postpone
	screenshots (text)

merging explain to newbies about squashing

check nntp for updates
muttrc linter correct, or comment out?
base64 3 byte work chunks -- bigger?

review describe with pictures the three github merge options

find markdown code theme that I like

nntp on MY server - 3 groups
	user ml
	devel ml
	github issues
what about:
	mutt user ml
	mutt dev ml

pre-reply hook -- takes original email and formats it however
or
pre-sent hook, filter before send?
why bother?  should be done in editor?

"source" command relative to $cwd or previous file

categorise all messages in code
	info, warning, error, question
which imply user to do: nothing, be informed, worry, query user
errors should be clear whose fault
user: e.g. type something invalid
config: file invalid / missing
code: internal error, missing ops
separate what user cannot do vs MAY not do

safe macros enhancement request: https://github.com/neomutt/neomutt/issues/69#issuecomment-230442101
	zmo suggests: emulate the augroup feature of vim :)
	macros specific to a folder, or notmuch, etc
	have an "account" function that limits to one account
	account "imap://..." set sidebar_visible = yes

mailbox +/wibble
mailbox =wibble
	aren't equivalent, caused problems for squillis on irc 2017-02-10
	# mailboxes =INBOX "+/Drafts" "+/Sent Items" "+/Systems/A" "+/Systems/B" "+/Systems/C"

new feature checklist -- code all configs, doc, readme, web, doc validate

release criteria for a new feature
	changelog
		changes
		num commits?
	clean build
	configure --option (off)
	basic docs
	tidy code (whitespace, etc)
	example config
	screenshots of new features
		text/html screenshots if possible

trash folder: forget the directories idea?      who cares about deleted stuff?
trash needs index panel expando -- Original location
archive *needs* dirs %Y / %From?  auto-create, auto-delete on empty
<empty-trash> function
"empty-trash-confirm" variable quad-type
expando for status bar -- trash-size (bytes/Mb) trash-count (number of deleted)
archive needs X-Original-Dir (like del)
	<unarchive> function
tie archive to notmuch to auto index
status bar needs expando for archive contents in (kb,Mb) or (count)
archive/trash expandos -- unless too heavy to calculate
	consult indexes for results/numbers
	does the index store size?
archive needs rich expando save strategy
	%Y, %m, %d -- lots of dates
	%from, %to, etc authors
	%list, $orig-folder
	size/count of attachments
	every conceivable attribute of original mail
use NNTP server (on flatcap.org) to store mentor conversations
	mailing list history too
	topic per mentor idea
	topic for introductions
can nntp compress its mail folders?
	or just compressed disk media underneath
	can mutt-dev-list maintainer get archive from marc.info?

type:investigate ?
	something that needs research
	might lead to docs
	might not lead to code

limit current thread
	new mail shows up even when not in thread

commands
	rename all those containing _ (underscore) to - (hyphen)
	accept either
	autocomplete to hyphen
	linter for muttrc -- with warnings

issue - auto screenshots - sample mailbox

branch 123-desc auto work-in-progress

create list of current scripts shell/perl
	build processors
	automators
	list -> website -- link to repos
	#!/bin/bash ->  sh

newbie - recommend setting 'set user_agent = yes'

mutt IPA /mÊŒt/

add abort-mailbox to nntp, etc
	raise issue

change release cadence?
	feature release
	bug-fix release
only update translations on bug-fix release
fixes for docs are bug-fixes
two open milestones (next-feature-release, next-bug-fix-release)

list Sven's unused letters to the main guide

leave-folder hook?

chronic "moreutils" package

web
	```note
	css proportional font
	bold first line using css
	add icon?
	```code
	specifically for code?
	no interferes with markdown highlighting

xgettext notes, L10N, _(), N_()

po.vim
	toggle English vs Foreign
	options to show/hide
		whitespace
		dots
	set symbols

shrink version number to YYx
	2 week releases -> 26/year, 26 letters!
	week 16 release => 16q or 16Q
	52 weeks => AaBbCc etc
	what about stable release?
	-LTS needs multiple releases but one name

complete review of string handling in mutt
	string contentation
	tokenisation
	matching
	etc
	see which, if any, gnu-only string functions are useful

donate page
	paypal
	bitcoin
	get-together costs?
	contributions to neomutt.org domain?
	what?

offline working
	mutt hangs whenever the network goes down and is essentially useless
	what's needed to make mutt useful without a network?
	"auto-postpone"?
	"send-on-reconnect?"
	cache more information about mailboxes?
	network heartbeat to detect connectivity?

what would be needed to have an 'offline' mode?
	how much extra folder info would we need?
	just keep one copy of the 'last state'
	how much code would need rearranging?
	âˆ€ index items, need availabity marker
		which are local?
		Header, Struct, Body, Attachments

imap force body cache on read
	option for offline working

inotify âˆ€ local mailboxes
	2016-11-16 12:13 <royger>
	flatcap: maybe using some abstraction library, like libfswatch
	(it seems to support kqueue, inotify and fsevents)
	https://github.com/emcrisostomo/fswatch/tree/master/libfswatch

collect useful tools in neomutt org:
	urlview
	offlineimap, mbsync
	procmail, maildrop, sieve
	etc
	swaks: smtp tester
	khal
	calcurse - curses calendar app

web: features list page
	add upstream column

How to Use Mutt doc
	step 1 - select your source
		POP, IMAP, local, offlineimap/alternative

getting started
	mention travis notification email

web: changes page -- since/relative to mutt

web: misc page for extra options that aren't in features

announce GPLv2 usage for project
	make it clear on the (devel) website

stable branches for LTS releases?
	Why?  Mutt doesn't

code school -> neo branches (regularly rebased)
	[school/new-variable]
	[school/new-function]
	[school/new-color]
	etc

code school
	variables
	functions
	architecture 101
	web top-level

each web dir, have _source.txt
	details origin of page data
	scripts for generating

web
	auto-generate list of WIPs
	[devel/*] -> list
	where does the description come from?
	update daily
	since DATE
	last update DATE

DANE instructions for neomutt gpg key

create file on all neo members
	who's who
	who's done what
	date of last contribution

imap supports queries
	"+?query=tab:inbox"

website
	404 is static!
	manual/guide -- not a collection
		needs to be ordered
	src code is not a distro, so list it last

enforce real names in git commits?

look through upstream mutt trac for
	enhancement ideas
	feature patches to apply
	bug fixes
	[easy] ?
	comment in trac "neomutt adopted" when done!

settings for uncrustify, clang-format
	for current neo code
	for future  neo code

named-mailboxes use Mailbox Shortcut % ?
	%tidy-name
	needs plugging into other code
	abbrev names to "%name" if possible
	if configured?

nested-if
	stack of nesting chars in char[]
	$? or $< push only
	matching char => pop
	32 deep stack

2016-10-25 11:04 <mgedmin>
	pet peeve: when I try to open a gigabyte-sized mbox file with 10,000 messages, I cannot abort that

2016-10-24 20:54 <flip214>
	it would be very nice if switching to an imap folder could be aborted by ctrl-c
	having all headers fetched anew and having to wait for 2 mins, knowing that the wrong folder is being loaded, isn't that nice
	the counter for the headers fetched (N of M) counts up
	Ctrl-C gets ignored

mutt_launcher
	use a pipe to channel log messages back to mutt
	pipe(), fork()
	dup2() to replace stdout,stderr
		=> printf to log
	stdin -> null

pre-cache app?
workflow:
	offlineimap
	notmuch new
	cache-every-file

need to document "missing" keybindings
	^Q ^S flow control
	^O terminal (BSD only)
	2016-10-23 22:16 <Riviera> stty discard undef; mutt
	"stty -ixon" disable Ctrl-Q
	can this be done programmatically by mutt?
	"stty -a" to show settings
	cfmakeraw(3)
	zsh is able to reset terminal configuration after each command with ttyctl -f

issues -- always assign (for later reference)
	fixer/mentor only makes sense for bugs/enhancements
	what about questions?

2016-10-21
13:24 <mgedmin> on ubuntu I think it's best to 'sudo apt-get build-dep mutt' to get all the libraries

make tags -- ignore standalone tools
	needs to ignore #ifdef TEST, too

external testing
	how many external events can we control?
	how many can we simulate?
	via pretend keystrokes
	key, mouse, winch fs, net

need way to repeatably test net failure
	tcpkill -- doc in dev web

find all non-mail users of pager
	add to index/pager tests

index preview mode - display 'n' lines of the email body
	when in the index

nested-if -- index-format display ? if doesn't match string put in
	%<> changed to %? !

bot on server to mail dev list on git commits?

admins need to make a release in 1 week's time -- practice
	(one of them, or all)

"report issue" notes -- OP needs to be around to:
	answer questions
	run tests
	etc

can we workaround the case of gpgme + self sign / smime?
	but use it otherwise?

imap/pop âˆ€ devs
	no outgoing
	incoming to user@dev.neomutt.org
	sample emails refreshed nightly
	btrfs de-duped -- cron
	or cp --reflink

function fuzzer + scripting
	x inputs
	y globals
	difficult because of too many inter-linked structs
	and poorly designed functions

website top-level for scripts
	git submodule?
	like irssi scripts

debugging docs:
	125k lines of code
	help us find out which
	bug report blurb

21:55 svenG "No attachments, cancel sending? ([yes]/no):"  so NOT cancelling the sending.. sends. o_O  double negatives are always so confusing.. :-/

index folding (happens above level of emails)
	fold by option, e.g. day, month
	Wednesday
		mail
		mail
	July
		mail
		mail
	uses extra lines
	saves width

$sort = [prefix-][...]order
	prefix = reverse
	prefix = thread

vim has set vs setlocal
	mutt has accounts as separate entities
	set      var => global
	setlocal var => per account

new two-letter expandos
	initial letter picked with no clashes anywhere
	=> 26 more expandos to use

scratch-pad function
	creates a tmp file
	functions can put text in it
	you can view it in the pager
	you can edit it
	you can save it
	could be used by scripts to save output

breakdown
	source (simple)
	source (conditional, e.g. feature)
	source (conditional, e.g. OS libc)
	build (scripts/Makefiles)

multi-line index.  options:
	for all entries
	for current entry
	for current thread
wrap long fields
sacrifice height to save width

mime-typer plugin
	notify if the mime type doesn't match what *you* think it should be
	change the type (option)

pgp key manager/management
	list, ignore revoked keys
	sort options
	filtering

generic lists of volatile variables attached to
	mailbox/context or
	email
scripting could save info there, such as
	num emails in thread
	num new in thread
	score
move score from permanent to volatile

macports, is there something I can update automatically at release time?
	cf homebrew

config file accept keybindings using
	C-      Ctrl-   Ctl-
	A-      Alt-    Meta-
	W-      Win-    Mac-?

add cursor to pager (on/off)
	=> can highlight text
	can click links
	like firefox cursor mode

nested-if script

syntax file in local vim syntax dir needs to be called
	muttrc to match vim modelines in other files

separate packages for neomutt
	neomutt          - binary
	neomutt-docs     - main manual
	neomutt-contrib  - muttrc, vimrc, etc
	neomutt-docs-dev - code docs
	neomutt-distro   - copr, debian, macports
split repos to match
branch by version / language

alt-e resend_message - which hooks are called?
	add lua hook

filter manager
	time limit option -- on holiday!

forgotten-attachments: German example:
	"hÃ¤ng an" won't match over a new line
	strdup regex string, replacing spaces with
		"[ \t\n]+" ???
	does it work with \n embedded?
	could I pre-process the email text?
	it it utf-8 compliant?

turn mutt into a random email generator

startup-hook
	immediately before displaying the index for the first time
	useful for testing
shutdown-hook
	before closing mailbox connections

Need strategy for unrepeatable/too-little-info bugs/crashes

what are our killer features?
	put them on the website writ large
	scripting
	matcher?

index-fold-level
	0 completely folded
	1 depth 1
	2 depth 2
	-1 no folding
	overridden by user keys
key to
	view current message
	close other folds
	etc

website/repo for scripts
	like scripts.irssi.org
	site generated from the script headers

vim-like record macros 'qa'
	save macro
	play macro

should log files be localised?
	make it an option?
	debug -> english?
	hard to debug for other nationalities

development bottleneck
	document more tasks
	delegate more tasks

ifdef needs an "else" condition
	how?

files/dirs are sorted the same way as network folders
	may not make sense

mbsync better than offlineimap?

imap only 'n' messages option
	like $nntp_context

modularise header caching/dbs
	=> needn't use same cache type
	for header / message cache

pager -- sidebar gets updated but not status line / term header

vim-like hls option: persistent across emails

source script|
	pipe -- lookup exact meaning and implications
	works, but can't tell you where an error occurred

context sensitive popup menus
	e.g. index - tag some emails, hit <menu>
	options: copy, save, delete, set flags, reply, etc

check all lists of features are up-to-date
	web, etc

19:32 <mykoserocin> is there a way to show condensed DKIM results instead of full "Authentication-Details" header?
19:32 <mykoserocin> e.g. "DKIM: pass" or "DKIM: fail"
19:52 <brendan> mykoserocin, I use the spam marker system for it: spam "Authentication-Results: mymta.com; .*dkim=pass" "âœ“"
19:52 <brendan> spam "Authentication-Results: mymta.com; .*dkim=fail" "x"

$source_dir like folder
	or like $PATH?
	looking for files to source

browser - add flagged
	expando
	sort option

INBOX vs inbox
	not updating values for browser

copying a large mailbox / number of files doesn't trigger the progress bar
	mbox-100000
	tag all
	copy to another mailbox, e.g. maildir

Passing $VARs to children processes, means
	tell vim about mail rcpt, subject, etc

upstream bug -- folder_format, sidebar_format %n (has new mail)
	shouldn't be cleared if "mark_old = no"
	quit and restart mutt and the flag comes back

new index/sidebar_format expando: icons
	each email can have a set of icons
	each icon has a unicode character and a colour
	sorted in order of definition
	tie-in to labels / notmuch tags

fork vs non-fork -- animal species reference
	species: noun
	a group of living organisms consisting of similar individuals capable
	of exchanging genes or interbreeding.

trash + gmail
	doesn't work as expected
	effectively archives them on gmail

do saved emails (that get deleted from current folder) appear in the trash?

NeoMutt signing key on
	flatcap.org
	neomutt.org
	github? where?

web update about.html : done so far

change sort option
	thread becomes a prefix
	e.g. "thread-date"

fmemopen -- when fixed, default to off

automate github release
	tag, push, create release, push, assets, checksum

dbus - also implies
	synchronisation of multiple copies of mutt
	e.g. multiple windows/views

jump to previous folder command?
	"cd -"
	vim: "ctrl-^"
	can this be done with a folder hook?
	set my_olddir = dir
	is it too late when we get the hook?

"bind index ` command"
	parses badly
	doesn't warn the user

github issue notifications forward to IRC
	or dev mailing list

context-sensitive help?
	how?
	sensitive to what?
	how about:
		"show-me-this-file" command
		display in pager
	if in pager, close & open text file & restore on 'q'
	if in index: display & return to index after

maildir_trash conflicts trash folder patch
	our patch, check upstream version
	document this

mutt config source DIR
	loads all files within
	recurse?

web mailing list page with sven's muttrc example

no need to subscribe to mailing lists

darnir:
	use gpgme not gpg
	warn users?
	educate users
	can we force config=yes?
	what if libs are missing?

mutt doesn't close file handles on fork/exec
	need more close_on_exec in fopen
	open pdf attach -- look in /proc for evince
	security issue

generate (script) tree of all source (by tags)
	and create squashfs

web/readme âˆ€ pages
	last proofread date
	last proofread person
	periodic checks
	divide and conquer
	auto-footer: last updated, last proofread

invert index option
	new mail at top of screen

index-color -- index_date pattern?
	and index_label

compress flickers, but gpg doesn't
	imagination, or not?
	option to NOT leave alt-screen mode

lots of demo configs for
	index_format
	header_order
	etc
create a function to cycle through them?
	would need some good sample emails
	various headers
	various flags

mutt connection config wizard
	special cases for gmail, etc
		open gmail pages in browser
	test host for:
		imap
		pop
	test for tls
	ask for password
	test connection
	like evolution's wizard
	write config to file/screen

mutt-tips: integrated
	tips command
	fake? email or browser spawned
	neomutt tutorial

transcribe issue#56 vim-keybinding ideas
	-> docs/vi.txt
	wiki

gmail patches -> devel
	need testers

nntp list, can't sort by counts

toggle-quoted : option to remember state
	or "hide_quoted_text" bool
	a caps-lock for toggle-quoted
		don't have to do it for each mail
	can this be done with "message-hook"?

offer up-to-date vimrc for mutt/neomutt to vim.org
	autocmds for neomutt/mutt config locations

update man page for mutt
	wrt muttrc location, etc

tip - status_format + status-color
	ctx->readonly => red padlock

unstable: .gitignore upstream of feature branches, what else?
	common docs, travis

sidebar -- imap all folders vs subscribed
dovecot public mailboxes for tips?  one public user?
nntp tips? ":tips" command to toggle nntp vars and mailboxes

remote config -- like browser proxy setup
	display to user "are you sure?"
	useful for tips & examples
	way too dangerous

alternative to sb search
	key -> numeric prefix for all folders
	type number<enter> to select
	(like index-panel)

sidebar "live" search of folders
	key to start searching
	live filtering at every keystroke
	enter selects
	Ctrl-C / Ctrl-G aborts
	fuzzy matching
matching applies to multiple areas of mutt
	sidebar
	aliases
	folders
	files
	index panel
	pgp keys

2016-08-12
	08:31 <flip214> Hi. Another thing I would love to see: an email arrives in INBOX; I answer it,
		and define the FCC for the sent mail, but the incoming mail is still in INBOX.
		so a "reply-and-move-to-same-folder" would be interesting to me.

doc -> contrib âˆ€ vimrc, muttrc
	=> will break downstream packaging
	announce change, make change in next release

transition guide:
	man neomutt
	a guide for users of mutt moving to neomutt

symlink man pages, etc (for ease of use)
	neomutt -> mutt

getopt for neomutt
	--help
	--version
		"mutt -v | head -1" is pain

sidebar
	have an alternate mailbox like vim's alternate file
	(isn't this the '-' mailbox?)
	create an alias for it '#'
	c# -> change to alternate directory
		new alternate becomes old dir
	save files to #
	set alternate mailbox function
	colour highlight for alternate mailbox
	expando %# for alternate displays '#' or ''

mutt tips on startup
	distribute a contrib/mutt-tips dir which is a mailbox
	select a random (email/tip) from the list
	pick one that's unread (preferably)
	how can we preserve the "read-ness" of an email after a package update?
	.mutt.top-tips ? -- save a list of message-ids in there?
	<top-tips> command creates a new mailbox (from DATA_DIR/DOC_DIR)
		if in /usr it would be read-only
		need to store flags elsewhere
		flags: read, flagged!, deleted (i.e. don't show me again)
	intersperse with mailboxes commands
	tips should be self-contained (to start with)
		unless they reference old tips
		nested emails?  what about multiple inheritance?
		need hyperlinking "see also" links
	use labels (from Keywords plugin) to add value
	use mutt's caching facility to store the metadata

macro instruction <no-history> like vim's <silent>
	some macros end up in the log

'ifdef' improvement
	ability to check mutt version number
	ifdef VERSION == X
	ifdef VERSION > Y
	like vim

new-mail => dbus as a goal, see dgc

doc changes/todo list for limit-current-thread

24-bit colour => non-curses back-end
	enumerate all the curses things we do
	get screen size
	listen for screen size changes (WINCH?)
	wait for key presses
	clear screen
	clear line
	write text

mail sieve issue -- colour code for origin?

neo-build
	use git config for settings
		enabled/disabled by default
		configure settings
	save config.h, etc in .git/neobuild
	neobuild --generate

sample IMAP folder (for devs)
	regenerate daily

script to generate min-build
	put in contrib?
	check config is still up-to-date

Mutt config generator app
	or good (curated) sample config
	tutorial
	translations

add tutorials (like sidebar intro) to the website
	redlink some empty ones (or partials)
	ask for translations?

use Gutenberg texts for sample emails
	use mutt-dev mailing list as a template?
	alias all names
	replace all message-ids (but keep links)
	strip out most headers

check makefile dist file list
	ChangeLog.neomutt, etc

update readmes
	project links
	project contact
	version
version.c
	copyright
	contact
	version
main readme
	project links
	project contact
	version
	list latest version?
		no, will always be out of date

GIT REPO?
	.gitattributes
		merging
		diff regexes
	doc my .gitconfig
	all bin/ to repo + .shell/bin/git

upload all bin/ add (c) and licence

Web Page (front) LATEST VERSION + links
	+ ChangeLog with links to commits?

list of to-be-written pages on web
	icons for level of completion

create empty (red-linked) pages on website, for people to write

howto build neomutt page
	simple instructions
	expert instructions
	explain all build scripts, etc
	location of source / repo
	howto install
	distro pre-built installs

NeoMutt website top tips?

[management]/bin
	sync.sh 6h cron script to sync mirrors
	sync needs ssh key
		external to script
		(document in header)
	sync reads data file with header, whitespace & comments

sample mail repo filled with example/problem mailboxes

delegation of keys -> focus() -> parent -> global, e.g. IW, Mail
	functions => components (e.g. mail)     }- mail_init() register_functions(); register_commands();
	commands => components                  }

show focus -- sacrifice help line?
	no, it's not always visible
propagation of notifications -- start @focus, work down
	SB, IW, PW + 'q' mail accepts, hides PW, PS, focus IW
	SB, IW + 'q' mail notified, rejects, global accepts, closes app
Help starts @focus, Panel Name + get_keys method
if sidebar is a separate panel and src file, should IW be?  PW?  AI?
If focus is on PW and SB, IW, PW are siblings, how can SB get notifications?
	or does mail Panel catch and iterate through children?
	SB mappings are (index,pager) => behaviour wanted but not in AW

panels have dividers enum
	left
	right
	top
	bottom
	between
	outside
who owns the dividers space?
set_focus (panel)
	who owns the focus?
	gfx(curses)?
	get_char -> gfx_get_char -> consider focus
on close panel, focus moves to
	*prev*/next sibling, or parent?
	due to mutt's UI focus moves to prev sibling
how can I show focus without moving anything? i.e. borders
	sacrifice a top line?
	border highlight?  => always present
which panels *accept* focus?
	sidebar
	index window
	pager window
	<tab> to switch?
	or <left>, <right>?

website: some bug-fixes have gone away -> success page?

âˆ€ new bugfixes -- reference trac number in commit message
test email reply to issues, etc
	markdown?

get travis to build RPMs on neomutt and deploy to github release's artifacts automatically
website front page: do YOU have a mutt patch? -> contact us
website collection of changes since last release -> relnotes on release
	note which branches, etc
website highlight section on toolbar (solid colour?)

new hierarchy: tree => mail's parent is folder or mail

icons for news:
	news: newspaper
	devel: jigsaw, spanner&screwdriver
	release: present, balloons

use links(1) as a model for re-architecting mutt
	mouse control (inc right-click)
	safe html rendering
	pop-up windows
or mc (midnight commander)

update website gh page: list of branches
neomutt FAQ -- containing what?
add my gpg signing key to neo.org, fc.org

fmemopen - merge into one place in mutt_mktemp()?
	idea from dgc email
	do all the callers know the file size?

Do drafts *need* to be stored in a separate folder?
	why not inline?
	in threaded order
	just tagged or coloured
	status flag to denote draft

screenshots on website
neomutt version on website home page

doc travis and coverity options
split source?
	tools/ - standalone exes
	library/ - replacement library functions
	readme/ - obvious

save email doesn't respect the umask

kdave - limit-current-thread
	alt-l (show limit) should respond "limit thread"
	is "limit ." the same as "limit all" -- YES
		fixed internally
	create unlimit patch and pull-request for kdave?
	limit doesn't have any context, just a pattern
	limit-current-thread NEEDS to know current email
	it'd be nice to change limit to accept another "string" arg
	currently
		"all" -> "~A"
	change limit
		"thread" -> "~a" (only letter available)
		let general limit machinery do the work
	unfortunately they can't see the current email
	use context, or change prototypes

vim library of config options(vars)
	auto-extract from mutt_config.c

kill version.c:rstrip_in_place()
	fix external build scripts

how should mutt_yesorno() work?
	Question is asked modally & outside area of asker
	=> hide command line, show question
	question panel gets request, shows itself, hides command
		make command-line panel invisible?
		make question panel higher in z-order?
			=> they are coincident

changes to css must set both fg, bg
	cf <note>
	reduce colour of <command>s too

'c' fails if dir has trailing /
	e.g. when you use <tab> to complete!
'c' to open fails, test cmdline open too
	check sidebar displays correct highlight/open

source command -- allow wildcards
	fits in nicely with ifndef
	or 'source_dir' command to read all contents
	or "source dir" to read all contents
	recursive option?
	recursive by default?

cond-date needs some concrete examples

cond-date
	all,dates,are,broken@ 1y -> this year (not 12 months)
		1w -> this week (not 7 days)
		if the dates were sensible (7d = 7 days back from now)
		they'd tie in with ~d, e.g.
			color index color237 default "~d>30d"         # Over a month old
		reuse the ~d code
			pattern.c:eat_date()

do format conditional work on strings, etc?  meaningful?
	empty => false

browser
	can sort my num new msg, but can't display count itself
	sort needs docs -> promote to feature?
		check kz for docs/examples
	%n isn't representative of "all message count"
		doc as (N)umber of messages, or
		%c message (C)ount

community script check for update
	date community docs?
	or just rely on commit date?

replace " with ' in muttrc

index_color should apply to status_bar when viewing mail
status_color should apply to mid-status_bar when (pager_index_lines > 0)
shouldn't be affected by 'status_on_top' either

docs/muttrc/readme/mutt_config.c
	need to document default values for variables

Generated muttrc is an encyclopaedia
Supplied  muttrc is a guide for dummies

git
	create git diff regex for manual.xml to identify the section where the changes occurred
		grep "<sect[0-9] " manual.xml.head
		need to look for <sect> <chapter> <table> <example>
	check the default 'c' git diff regex against sidebar.c
		check C function
		check C struct/enum

mutt folder/dir browser
	".."/open should start with current folder/dir selected
	display full path at top of screen/statusbar/titlebar

introduce new format strings
	index_rich_format

what are the objects in the Index?
	cache the index formatted strings on them

refer to and compare config names by hash only?
	save lots of string compares
	gperf to generate perfect hashes

index format -- full directory mode
	show unix perms like ls
	user/group/etc
	too specific?
	what about other OSs?

cache for formatted strings?
	too much can change
		index: flags, folded-ness
		sidebar: all numbers => cache invalid

keep revision number for all config items (as a prelude to proper notifications)
	only increment revision number on change
	leads to possible A-B-A problem (change blindness)
	if (ver(format_str) > old_ver) STMT;
	allows code to make informed decisions about caching

which config items require frequent and costly interpretation?
	all format strings -- every line, every refresh

data source LDAP
	address book? -- different grouping/hierarchy?
	calendar? -- different timescales?
	news?  subscribed   <--> all groups
	rss?   unread feeds <--> all feeds

signature manager
disposable email address plugin?
	need external API to send/receive

Undo, what's possible?
	Last action?
	Many actions?
persistent undo on email editing?
undelete?
unsend?
tagging?

integrate nntp into sidebar
what does notmuch return?
	how do i link it to existing objects?

Where does getchar() get called?  can I centralise them?
Does getchar() wait or poll?  Need it to poll
Polling -> Idle -> Event callback that I can use to populate EMAILs
need to clear index on Toggle-Virtual

postpone patch doesn't quite work
	1) The PostContext and menu are private, so sidebar can't tell that
	   we're looking at the postponed list after navigation.
	2) After navigating to another folder, you still have to "quit" to
	   get the display to refresh.

alternative to lightweight patch
	don't update info âˆ€ EMAILs
	just update the current page
	only update lists when the user OPENs a folder
	not when they move the highlight
	could pre-emptively populate the previous/next pages

demo setup - lots of files in:
	local mbox
	local mh dirs
	IMAP mbox
	IMAP mh dirs
	POP mbox
	POP mh dirs

sidebar_sort is an enum - on set error, it could show the valid values
quadopt can give help too -- important since varname gives no clue about type
break up mutt_config.c, globals.h, functions.h
	mutt_config.c option DELEGATE, prefix "sidebar_", callback?
init() on module calls add_options()
	=> sb_opts refer to sb-private vars in sidebar.c
option breakup depends on lots of notifications
Where are OPTSIDEBAR* used outside sidebar.c
	curs_main.c, email.c, mh.c
Distinguish between movement and search wrap?
	movement - next/prev (1 line), page up/down
	search - find next/prev new
Config change notifications
	fn (name, old_val, new_val)
how would function delegation work?
	init() -> add_functions (name, callback)
	the callbacks would need to be able to manipulate mutt objects
Register functions & callback
make sure anything we need is exposed
if we hide our globals, give then all accessor functions get/set_VAR()
init would need to register new sort methods

most options are "short" limited to +/- 32767
set/unset/toggle?  invVARNAME
option - don't sort inbox -- defined how?
separate modules -- sidebar, index, pager, help? -- each with
	init()
	notify()
	close()
	config()
sidebar_wrap=search,motion (separate bools for simplicity?)

Unmailbox * â‡’  many notifications followed by ONE redraw

parse_mailboxes -> notify sidebar => know if anything's invalidated TBCH
can I use realpath(), mutt_expand_path() for anything?

Start; Incoming; Inbox open; current = Incoming; sort â†’ cur is offscreen, boundaries lost

Notify (Box*, Rect old, Rect new, flags)
Flags:
	too small to render
	changed visibility

Changed posn notification ONLY
	e.g. sidebar has swapped sides
could imply that cached data may be OK to reuse
	e.g. don't need to call calc_boundaries

repaint if:
	size changes
	position changes

DBUS plugin -- to do what?
	notify out
	take input to do what?
		accept mailto: links

quiet config option -- don't whine about unknown config options
	or quiet command line option

trim trailing slash from mailboxes, folder
	shouldn't be displayed

New only -- include structure (empty dirs) to keep hierarchy
	mail (0)
	  fruit (0)
	    apple (1)

sorting
	if displaying full paths:
		sort by display name
		sort by underlying name
	if displaying indented paths:
		sort by top-level names, then children

send escape sequence to clear terminal title when mutt closes
mutt_config.c struct option_t needs enums for types and union for data
timer notifications, e.g.
	highlight something for three seconds, then return to normal

wrapping â†’
	extra char at beginning of line "+"
	extra char at end of line "<-/"
wrap at:
	char
	word (whitespace)
	clause (punctuation)
	sentence (.!?)
No wrap â†’
	extra char at end of line ">"

colours changes
keypress        key, no params
config change   key, value
		ALL, no params
mail status change
	read/unread/flagged/deleted/edited
	MESSAGE_ID, flags
mailbox change
	new/deleted
	new mail, deleted mail, flagged mail, etc
connection status
	connected
	disconnected
startup
quitting - any use to anyone?
selected mail changed
selected mailbox changed

make AUTHORS -- which repo did this?

ellipsis
	mutt_error
	mutt_message
	mutt_debug

